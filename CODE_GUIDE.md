# ê²Œì„ ìë™í™” ë„êµ¬ - ì½”ë“œ ê°€ì´ë“œ

## ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#1-í”„ë¡œì íŠ¸-ê°œìš”)
2. [ê¸°ìˆ  ìŠ¤íƒ ë° ì„ íƒ ì´ìœ ](#2-ê¸°ìˆ -ìŠ¤íƒ-ë°-ì„ íƒ-ì´ìœ )
3. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#3-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
4. [í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„](#4-í•µì‹¬-ê¸°ëŠ¥-êµ¬í˜„)
5. [ì½”ë“œ êµ¬ì¡°](#5-ì½”ë“œ-êµ¬ì¡°)
6. [ì£¼ìš” ì½”ë“œ ì„¤ëª…](#6-ì£¼ìš”-ì½”ë“œ-ì„¤ëª…)
7. [ì„¤ì¹˜ ë° ì‹¤í–‰](#7-ì„¤ì¹˜-ë°-ì‹¤í–‰)
8. [ì™¸ë¶€ ì ‘ê·¼ ë° ë°°í¬](#8-ì™¸ë¶€-ì ‘ê·¼-ë°-ë°°í¬)
9. [í…ŒìŠ¤íŠ¸ ë°©ë²•](#9-í…ŒìŠ¤íŠ¸-ë°©ë²•)
10. [ì„±ëŠ¥ ìµœì í™”](#10-ì„±ëŠ¥-ìµœì í™”)
11. [í–¥í›„ ê°œì„  ê³„íš](#11-í–¥í›„-ê°œì„ -ê³„íš)

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 í”„ë¡œì íŠ¸ ëª©ì 

**ë¹„ê°œë°œì(QA ë‹´ë‹¹ì)ê°€ ì½”ë“œ ì‘ì„± ì—†ì´ ëª¨ë°”ì¼ ê²Œì„ ìë™í™” í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ë„êµ¬**

ê¸°ì¡´ ìë™í™” ë„êµ¬ì˜ ë¬¸ì œì :
- Appium, Selenium ë“±ì€ ì½”ë“œ ì‘ì„± í•„ìˆ˜
- QA ë‹´ë‹¹ìê°€ ì§ì ‘ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ë§Œë“¤ê¸° ì–´ë ¤ì›€
- ê°œë°œì ë¦¬ì†ŒìŠ¤ ì˜ì¡´ë„ ë†’ìŒ

í•´ê²° ë°©ì•ˆ:
- **ë¹„ì£¼ì–¼ ë…¸ë“œ ì—ë””í„°**: ë“œë˜ê·¸ ì•¤ ë“œë¡­ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ í”Œë¡œìš° êµ¬ì„±
- **ì´ë¯¸ì§€ ê¸°ë°˜ ì¸ì‹**: ê²Œì„ UIëŠ” ì ‘ê·¼ì„± IDê°€ ì—†ì–´ ì´ë¯¸ì§€ ë§¤ì¹­ í•„ìˆ˜
- **ë‹¤ì¤‘ ë””ë°”ì´ìŠ¤ ë³‘ë ¬ ì‹¤í–‰**: QA íš¨ìœ¨ì„± ê·¹ëŒ€í™”

### 1.2 ì£¼ìš” ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì„¤ëª… | ê¸°ìˆ ì  ë‚œì´ë„ |
|------|------|--------------|
| ë¹„ì£¼ì–¼ ë…¸ë“œ ì—ë””í„° | í”Œë¡œìš°ì°¨íŠ¸ ë°©ì‹ ì‹œë‚˜ë¦¬ì˜¤ í¸ì§‘ | â˜…â˜…â˜…â˜†â˜† |
| ì´ë¯¸ì§€ í…œí”Œë¦¿ ë§¤ì¹­ | OpenCV ê¸°ë°˜ UI ìš”ì†Œ ì¸ì‹ | â˜…â˜…â˜…â˜…â˜† |
| OCR í…ìŠ¤íŠ¸ ì¸ì‹ | Google Cloud Vision ì—°ë™ | â˜…â˜…â˜…â˜†â˜† |
| ë‹¤ì¤‘ ë””ë°”ì´ìŠ¤ ë³‘ë ¬ ì‹¤í–‰ | 50ëŒ€+ ë™ì‹œ í…ŒìŠ¤íŠ¸ | â˜…â˜…â˜…â˜…â˜… |
| Suite ì‹¤í–‰ | ì—¬ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤ ë¬¶ì–´ì„œ ìˆœì°¨/ë³‘ë ¬ ì‹¤í–‰ | â˜…â˜…â˜…â˜…â˜† |
| ë””ë°”ì´ìŠ¤ ì ê¸ˆ & ëŒ€ê¸°ì—´ | ë‹¤ì¤‘ ì‚¬ìš©ì ë¦¬ì†ŒìŠ¤ ì¶©ëŒ ë°©ì§€ | â˜…â˜…â˜…â˜…â˜† |
| ì‹¤ì‹œê°„ ë””ë°”ì´ìŠ¤ ë¯¸ë¦¬ë³´ê¸° | WebSocket ìŠ¤íŠ¸ë¦¬ë° | â˜…â˜…â˜…â˜…â˜† |
| í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸ & ë¹„ë””ì˜¤ | QA Recorder ì•± (ì‹œê°„ ë¬´ì œí•œ ë…¹í™”) | â˜…â˜…â˜…â˜…â˜† |
| ë©”íŠ¸ë¦­ ëŒ€ì‹œë³´ë“œ | ì‹¤í–‰ í†µê³„, ì„±ê³µë¥  ì¶”ì´, ì‹¤íŒ¨ ë¶„ì„ | â˜…â˜…â˜…â˜†â˜† |
| ìŠ¤ì¼€ì¤„ë§ | Cron ê¸°ë°˜ ì˜ˆì•½ ì‹¤í–‰ | â˜…â˜…â˜†â˜†â˜† |
| Slack ì—°ë™ | OAuth ë¡œê·¸ì¸ + ê²°ê³¼ ì•Œë¦¼ | â˜…â˜…â˜…â˜†â˜† |
| Server Manager | Electron í†µí•© ê´€ë¦¬ ì•± | â˜…â˜…â˜…â˜†â˜† |
| ì™¸ë¶€ ì ‘ê·¼ (Cloudflare Tunnel) | ì¸í„°ë„·ì„ í†µí•œ ì›ê²© ì ‘ê·¼ | â˜…â˜…â˜…â˜…â˜† |
| R2 í´ë¼ìš°ë“œ ì €ì¥ì†Œ | ë¦¬í¬íŠ¸ íŒŒì¼ ì €ì¥ ë° ê³µìœ  ë§í¬ | â˜…â˜…â˜…â˜†â˜† |

### 1.3 ìš´ì˜ í™˜ê²½

ì´ ë„êµ¬ëŠ” **ì‹¤ì œ í˜„ì—…ì—ì„œ ì‚¬ìš©ë˜ëŠ” QA ìë™í™” ë„êµ¬**ì…ë‹ˆë‹¤.

| í•­ëª© | ê·œëª¨ |
|------|------|
| ë™ì‹œ ì ‘ì† ì‚¬ìš©ì | ë‹¤ì¤‘ ì‚¬ìš©ì |
| ì—°ê²° ë””ë°”ì´ìŠ¤ | 50ëŒ€ ì´ìƒ |
| ë™ì‹œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ | 50ê°œ ì´ìƒ |

---

## 2. ê¸°ìˆ  ìŠ¤íƒ ë° ì„ íƒ ì´ìœ 

### 2.1 Frontend

| ê¸°ìˆ  | ë²„ì „ | ì„ íƒ ì´ìœ  |
|------|------|----------|
| **React** | 19.x | ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ UI, ëŒ€ê·œëª¨ ì»¤ë®¤ë‹ˆí‹° |
| **TypeScript** | 5.x | íƒ€ì… ì•ˆì •ì„±, ëŸ°íƒ€ì„ ì—ëŸ¬ ë°©ì§€ |
| **Vite** | 7.x | ë¹ ë¥¸ HMR, ESM ê¸°ë°˜ ë¹Œë“œ |
| **Socket.IO Client** | 4.x | ì‹¤ì‹œê°„ ì–‘ë°©í–¥ í†µì‹  |
| **react-window** | 1.x | ëŒ€ëŸ‰ ë°ì´í„° ê°€ìƒí™” ë Œë”ë§ |
| **Recharts** | 3.x | ëŒ€ì‹œë³´ë“œ ì°¨íŠ¸ |

**Context API vs Redux/Zustand ì„ íƒ ì´ìœ :**
- ì „ì—­ ìƒíƒœê°€ 7ê°œ Contextë¡œ ëª…í™•íˆ ë¶„ë¦¬ë¨
- Reduxì˜ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì˜¤ë²„í—¤ë“œ ë¶ˆí•„ìš”
- Context + useReducerë¡œ ì¶©ë¶„í•œ ë³µì¡ë„

### 2.2 Backend

| ê¸°ìˆ  | ë²„ì „ | ì„ íƒ ì´ìœ  |
|------|------|----------|
| **Node.js** | 22.x | ë¹„ë™ê¸° I/O, Appiumê³¼ ë™ì¼ ìƒíƒœê³„ |
| **Express** | 4.x | ê²½ëŸ‰ ì›¹ í”„ë ˆì„ì›Œí¬, ë¯¸ë“¤ì›¨ì–´ ìƒíƒœê³„ |
| **TypeScript** | 5.x | íƒ€ì… ì•ˆì •ì„± |
| **Socket.IO** | 4.x | ì‹¤ì‹œê°„ í…ŒìŠ¤íŠ¸ ì§„í–‰ë¥  ë¸Œë¡œë“œìºìŠ¤íŠ¸ |
| **WebdriverIO** | 9.x | Appium í´ë¼ì´ì–¸íŠ¸, íƒ€ì… ì§€ì› |
| **Sharp** | 0.33.x | ê³ ì„±ëŠ¥ ì´ë¯¸ì§€ ì²˜ë¦¬ (libvips) |
| **node-cron** | 3.x | ìŠ¤ì¼€ì¤„ë§ |
| **Zod** | 3.x | ëŸ°íƒ€ì„ ìŠ¤í‚¤ë§ˆ ê²€ì¦ |

**WebdriverIO vs Appium JS Client ì„ íƒ ì´ìœ :**
- WebdriverIOê°€ ë” ë‚˜ì€ TypeScript ì§€ì›
- ì¬ì‹œë„, ëŒ€ê¸° ë“± ìœ í‹¸ë¦¬í‹° ë‚´ì¥
- í™œë°œí•œ ìœ ì§€ë³´ìˆ˜

### 2.3 ìë™í™” & ì´ë¯¸ì§€ ì²˜ë¦¬

| ê¸°ìˆ  | ìš©ë„ | ì„ íƒ ì´ìœ  |
|------|------|----------|
| **Appium** | ëª¨ë°”ì¼ ìë™í™” | ì—…ê³„ í‘œì¤€, Android/iOS ì§€ì› |
| **UiAutomator2** | Android ë“œë¼ì´ë²„ | ì•ˆì •ì„±, ì„±ëŠ¥ |
| **OpenCV** | ì´ë¯¸ì§€ í…œí”Œë¦¿ ë§¤ì¹­ | ì •í™•ë„, ì„±ëŠ¥ |
| **Tesseract.js** | OCR (ë¡œì»¬) | ì˜¤í”„ë¼ì¸ ì§€ì› |
| **Google Cloud Vision** | OCR (í´ë¼ìš°ë“œ) | ë†’ì€ ì •í™•ë„ |
| **FFmpeg** | ë¹„ë””ì˜¤ ì²˜ë¦¬ | ì—…ê³„ í‘œì¤€ |

### 2.4 ì¸í”„ë¼

| ê¸°ìˆ  | ìš©ë„ |
|------|------|
| **Electron** | Server Manager ë°ìŠ¤í¬í†± ì•± |
| **Cloudflare Tunnel** | ì™¸ë¶€ ì ‘ê·¼ (NAT ìš°íšŒ) |
| **Cloudflare R2** | ë¦¬í¬íŠ¸ íŒŒì¼ ì €ì¥/ê³µìœ  |

---

## 3. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 3.1 ì „ì²´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ì‚¬ìš©ì (QA ë‹´ë‹¹ì)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                       â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   Frontend    â”‚       â”‚ Server Managerâ”‚
            â”‚   (React)     â”‚       â”‚  (Electron)   â”‚
            â”‚  Port: 5173   â”‚       â”‚               â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
          HTTP/WebSocket
                    â”‚
                    â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   Backend     â”‚
            â”‚  (Express)    â”‚
            â”‚  Port: 3001   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚    Appium     â”‚
            â”‚    Server     â”‚
            â”‚  Port: 4900   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼           â–¼           â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚Device 1 â”‚ â”‚Device 2 â”‚ â”‚Device N â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 í…ŒìŠ¤íŠ¸ ì‹¤í–‰ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚â”€â”€â”€â”€â–¶â”‚  testOrchestrator â”‚â”€â”€â”€â”€â–¶â”‚  testQueueServiceâ”‚
â”‚          â”‚     â”‚   (ìš”ì²­ ìˆ˜ì‹ )      â”‚     â”‚    (ëŒ€ê¸°ì—´)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚                         â”‚
                          â”‚ ë””ìŠ¤íŒ¨ì¹˜                â”‚ ë””ë°”ì´ìŠ¤ ê°€ìš© í™•ì¸
                          â–¼                         â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚   testExecutor    â”‚â—€â”€â”€â”€â”€â”‚  deviceManager  â”‚
                 â”‚   (ì‹¤í–‰ ì—”ì§„)      â”‚     â”‚ (ë””ë°”ì´ìŠ¤ ìƒíƒœ) â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼               â–¼               â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Actions   â”‚ â”‚ imageMatch  â”‚ â”‚ textMatcher â”‚
   â”‚(tap,swipe..)â”‚ â”‚ (ì´ë¯¸ì§€ë§¤ì¹­)â”‚ â”‚   (OCR)     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚sessionManagerâ”‚â”€â”€â”€â–¶â”‚   Appium    â”‚â”€â”€â”€â–¶â”‚   Device    â”‚
   â”‚(Appium ì„¸ì…˜) â”‚     â”‚   Server    â”‚     â”‚             â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 ë°ì´í„° íë¦„

1. **ì‹œë‚˜ë¦¬ì˜¤ ì €ì¥**: JSON íŒŒì¼ (`scenarios/{id}.json`)
2. **ì‹¤í–‰ ìš”ì²­**: REST API â†’ WebSocketìœ¼ë¡œ ì§„í–‰ë¥  ë¸Œë¡œë“œìºìŠ¤íŠ¸
3. **ë¦¬í¬íŠ¸ ì €ì¥**: JSON + ìŠ¤í¬ë¦°ìƒ· PNG + ë¹„ë””ì˜¤ MP4
4. **ì‹¤ì‹œê°„ í†µì‹ **: Socket.IO ì´ë²¤íŠ¸ (`test:progress`, `test:step`, `test:complete`)

---

## 4. í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„

### 4.1 ë¹„ì£¼ì–¼ ë…¸ë“œ ì—ë””í„°

**êµ¬í˜„ ìœ„ì¹˜**: `frontend/src/components/Canvas/`

ê²Œì„ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ í”Œë¡œìš°ì°¨íŠ¸ í˜•íƒœë¡œ í¸ì§‘í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Sidebar]  â”‚           [Canvas]            â”‚    [Panel]    â”‚
â”‚            â”‚                               â”‚               â”‚
â”‚  â—‹ tap     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”      â”‚  ì„ íƒ ë…¸ë“œ    â”‚
â”‚  â—‹ swipe   â”‚  â”‚ Start â”‚â”€â”€â”€â–¶â”‚  Tap  â”‚â”€â”€â”   â”‚  ì†ì„± í¸ì§‘    â”‚
â”‚  â—‹ wait    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚               â”‚
â”‚  â—‹ image   â”‚                          â”‚   â”‚  x: [  540 ]  â”‚
â”‚  â—‹ text    â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  y: [  960 ]  â”‚
â”‚  â—‹ conditionâ”‚      â–¼                      â”‚               â”‚
â”‚  ...       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”      â”‚               â”‚
â”‚            â”‚  â”‚ Wait  â”‚â”€â”€â”€â–¶â”‚ Swipe â”‚      â”‚               â”‚
â”‚            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë…¸ë“œ íƒ€ì…**:
| íƒ€ì… | ì„¤ëª… | ì•„ì´ì½˜ |
|------|------|--------|
| `start` | ì‹œì‘ì  | â–¶ |
| `tap` | í™”ë©´ íƒ­ | ğŸ‘† |
| `longPress` | ê¸¸ê²Œ ëˆ„ë¥´ê¸° | ğŸ‘‡ |
| `swipe` | ìŠ¤ì™€ì´í”„ | â†” |
| `wait` | ëŒ€ê¸° | â± |
| `tapImage` | ì´ë¯¸ì§€ íƒ­ | ğŸ–¼ |
| `tapOcrText` | í…ìŠ¤íŠ¸ íƒ­ | ğŸ“ |
| `condition` | ì¡°ê±´ ë¶„ê¸° | â“ |

**í•µì‹¬ ìƒíƒœ ê´€ë¦¬**:
```typescript
// FlowEditorContext.tsx
interface FlowEditorContextType {
  // ìƒíƒœ
  nodes: FlowNode[];
  connections: Connection[];
  selectedNodeId: string | null;
  selectedNodeIds: Set<string>;  // ë‹¤ì¤‘ ì„ íƒ

  // ë…¸ë“œ ì¡°ì‘
  handleNodeAdd: (type: NodeType, x: number, y: number) => void;
  handleNodeAddAuto: (type: NodeType) => void;  // ìë™ ë°°ì¹˜
  handleNodeUpdate: (nodeId: string, updates: Partial<FlowNode>) => void;
  handleNodeDelete: (nodeId: string) => void;
  handleNodesDelete: (nodeIds: string[]) => void;  // ë‹¤ì¤‘ ì‚­ì œ
  handleNodeInsertAfter: (afterNodeId: string, nodeType: NodeType) => void;

  // ì—°ê²° ì¡°ì‘
  handleConnectionAdd: (fromId: string, toId: string, branch?: string | null) => void;
  handleConnectionDelete: (index: number) => void;

  // ë³µì‚¬/ë¶™ì—¬ë„£ê¸°
  handleCopy: () => void;
  handlePaste: () => void;
  handleDuplicate: () => void;

  // í”Œë¡œìš° ê´€ë¦¬
  loadFlow: (nodes: FlowNode[], connections: Connection[]) => void;
  clearFlow: () => void;
}
```

### 4.2 ì´ë¯¸ì§€ í…œí”Œë¦¿ ë§¤ì¹­

**êµ¬í˜„ ìœ„ì¹˜**: `backend/src/services/imageMatch.ts`

ê²Œì„ UIëŠ” ì ‘ê·¼ì„± IDê°€ ì—†ì–´ **ì´ë¯¸ì§€ ê¸°ë°˜ ì¸ì‹**ì´ í•„ìˆ˜ì…ë‹ˆë‹¤.

**ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜**:
1. í˜„ì¬ í™”ë©´ ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜
2. í…œí”Œë¦¿ ì´ë¯¸ì§€ì™€ ë¹„êµ (OpenCV Template Matching)
3. ìœ ì‚¬ë„ ì„ê³„ê°’(threshold) ì´ìƒì´ë©´ ë§¤ì¹­ ì„±ê³µ
4. ë§¤ì¹­ëœ ì¢Œí‘œ ë°˜í™˜

```typescript
// imageMatch.ts - ImageMatchService í´ë˜ìŠ¤
import { imageMatchService } from './services/imageMatch';

// 1. ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜ (Actions ë˜ëŠ” ADB)
const screenshotBuffer = await actions.takeScreenshot();

// 2. í…œí”Œë¦¿ ë§¤ì¹­ ì‹¤í–‰
const result = await imageMatchService.matchTemplate(
  screenshotBuffer,
  templateId,         // í…œí”Œë¦¿ ID (templates.jsonì—ì„œ ê´€ë¦¬)
  {
    threshold: 0.9,   // ìœ ì‚¬ë„ ì„ê³„ê°’
    region: { ... },  // ROI (ì„ íƒì )
    multiScale: { enabled: true, minScale: 0.8, maxScale: 1.2 }  // ë©€í‹°ìŠ¤ì¼€ì¼ (ì„ íƒì )
  }
);

// 3. ê²°ê³¼ ì‚¬ìš©
if (result.found) {
  console.log(`ë§¤ì¹­ ì„±ê³µ: (${result.centerX}, ${result.centerY})`);
  console.log(`ìœ ì‚¬ë„: ${(result.confidence * 100).toFixed(1)}%`);
  await actions.tap(result.centerX, result.centerY);
}
```

**ROI (Region of Interest) ì§€ì›**:
```typescript
// ì „ì²´ í™”ë©´ì´ ì•„ë‹Œ íŠ¹ì • ì˜ì—­ë§Œ ê²€ìƒ‰ (ì„±ëŠ¥ ìµœì í™”)
// regionì€ ìƒëŒ€ ì¢Œí‘œ(0~1) ë˜ëŠ” ì ˆëŒ€ ì¢Œí‘œ ì§€ì›
await imageMatchService.matchTemplate(screenshotBuffer, templateId, {
  threshold: 0.9,
  region: { x: 0.1, y: 0.2, width: 0.5, height: 0.3 }  // ìƒëŒ€ ì¢Œí‘œ
});

// ë‚´ë¶€ì ìœ¼ë¡œ Sharp extract()ë¡œ ROI ì ìš© í›„ OpenCV ë§¤ì¹­
```

### 4.3 ë‹¤ì¤‘ ë””ë°”ì´ìŠ¤ ë³‘ë ¬ ì‹¤í–‰

**êµ¬í˜„ ìœ„ì¹˜**: `backend/src/services/sessionManager.ts`, `testOrchestrator.ts`

**ì„¸ì…˜ ê´€ë¦¬ ì•„í‚¤í…ì²˜**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     sessionManager                          â”‚
â”‚                                                             â”‚
â”‚  sessions: Map<deviceId, ManagedSession>                    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Device A    â”‚  â”‚ Device B    â”‚  â”‚ Device C    â”‚          â”‚
â”‚  â”‚ Session     â”‚  â”‚ Session     â”‚  â”‚ Session     â”‚          â”‚
â”‚  â”‚ Appium Port â”‚  â”‚ Appium Port â”‚  â”‚ Appium Port â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                             â”‚
â”‚  Screen Streaming: WebSocket (/ws/screen?deviceId=xxx)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**í…ŒìŠ¤íŠ¸ ì œì¶œ API**:
```typescript
// testOrchestrator.ts

interface SubmitTestResult {
  queueId: string;
  status: 'running' | 'queued' | 'partial';
  executionId?: string;
  position?: number;
  estimatedWaitTime?: number;
  message?: string;
  splitExecution?: {
    immediateDeviceIds: string[];
    queuedDeviceIds: string[];
  };
}

/**
 * í…ŒìŠ¤íŠ¸ ì œì¶œ (ìë™ ë¶„ê¸° ì²˜ë¦¬)
 * - ëª¨ë“  ë””ë°”ì´ìŠ¤ ê°€ìš© â†’ ì¦‰ì‹œ ì‹¤í–‰
 * - ëª¨ë“  ë””ë°”ì´ìŠ¤ ì‚¬ìš© ì¤‘ â†’ ëŒ€ê¸°ì—´ ì¶”ê°€
 * - ì¼ë¶€ë§Œ ê°€ìš© â†’ ë¶„í•  ì‹¤í–‰ (ê°€ìš© ë””ë°”ì´ìŠ¤ ì¦‰ì‹œ + ë‚˜ë¨¸ì§€ ëŒ€ê¸°)
 */
async submitTest(
  request: TestExecutionRequest,
  userName: string,
  socketId: string,
  options?: { priority?: 0 | 1 | 2; testName?: string }
): Promise<SubmitTestResult> {
  // ì‚¬ìš© ì¤‘ì¸ ë””ë°”ì´ìŠ¤ì™€ ê°€ìš© ë””ë°”ì´ìŠ¤ ë¶„ë¦¬
  const busyDeviceIds = deviceLockService.getBusyDevices(request.deviceIds);
  const availableDeviceIds = request.deviceIds.filter(
    id => !busyDeviceIds.includes(id)
  );

  // Case 1: ëª¨ë“  ë””ë°”ì´ìŠ¤ ê°€ìš© â†’ ì¦‰ì‹œ ì‹¤í–‰
  if (busyDeviceIds.length === 0) {
    return this.startTestImmediately(request, userName, socketId, options);
  }

  // Case 2: ëª¨ë“  ë””ë°”ì´ìŠ¤ ì‚¬ìš© ì¤‘ â†’ ëŒ€ê¸°ì—´ ì¶”ê°€
  if (availableDeviceIds.length === 0) {
    const queuedTest = testQueueService.addToQueue(request, userName, socketId);
    return {
      queueId: queuedTest.queueId,
      status: 'queued',
      position: testQueueService.getPosition(queuedTest.queueId),
      estimatedWaitTime: testQueueService.getEstimatedWaitTime(queuedTest.queueId),
    };
  }

  // Case 3: ë¶„í•  ì‹¤í–‰ (ì¼ë¶€ ì¦‰ì‹œ + ë‚˜ë¨¸ì§€ ëŒ€ê¸°)
  return this.startSplitExecution(
    request, userName, socketId,
    availableDeviceIds, busyDeviceIds, options
  );
}
```

**ë¶„í•  ì‹¤í–‰ íë¦„**:
```
ìš”ì²­: Device A, B, Cì—ì„œ ì‹œë‚˜ë¦¬ì˜¤ ì‹¤í–‰
     â”‚
     â”œâ”€â”€ Device A: ê°€ìš© â†’ ì¦‰ì‹œ ì‹¤í–‰
     â”œâ”€â”€ Device B: ê°€ìš© â†’ ì¦‰ì‹œ ì‹¤í–‰
     â””â”€â”€ Device C: ì‚¬ìš© ì¤‘ (User X) â†’ ëŒ€ê¸°ì—´ ì¶”ê°€
                                        â”‚
                      User X ì™„ë£Œ ì‹œ â”€â”€â”€â”˜
                                        â”‚
                                        â””â”€â”€ Device C: ìë™ ì‹¤í–‰
```

### 4.4 ì‹¤ì‹œê°„ ë””ë°”ì´ìŠ¤ ë¯¸ë¦¬ë³´ê¸°

**êµ¬í˜„ ìœ„ì¹˜**: `backend/src/services/screenStreamService.ts`

**WebSocket ìŠ¤íŠ¸ë¦¬ë° êµ¬í˜„**:
```typescript
// ë””ë°”ì´ìŠ¤ í™”ë©´ì„ WebSocketìœ¼ë¡œ ìŠ¤íŠ¸ë¦¬ë°
// ê²½ë¡œ: /ws/screen?deviceId=xxx

class ScreenStreamService {
  private wss: WebSocketServer | null = null;
  private streams: Map<string, DeviceStream> = new Map();

  // HTTP ì„œë²„ì— WebSocket ì„œë²„ ì—°ê²°
  initialize(server: http.Server): void {
    this.wss = new WebSocketServer({
      server,
      path: '/ws/screen',
    });

    this.wss.on('connection', (ws, req) => {
      const url = new URL(req.url || '', `http://${req.headers.host}`);
      const deviceId = url.searchParams.get('deviceId');

      // deviceId ê²€ì¦ (Command Injection ë°©ì§€)
      if (!deviceId || !DEVICE_ID_REGEX.test(deviceId)) {
        ws.close(4001, 'Invalid deviceId');
        return;
      }

      this.addClient(deviceId, ws);

      ws.on('message', (data) => this.handleMessage(deviceId, ws, data));
      ws.on('close', () => this.removeClient(deviceId, ws));
    });
  }

  // ADB screencapìœ¼ë¡œ ìŠ¤í¬ë¦° ìº¡ì²˜ í›„ ë¸Œë¡œë“œìºìŠ¤íŠ¸
  private async captureAndBroadcast(deviceId: string, opts: StreamOptions) {
    const { stdout } = await execAsync(
      `adb -s ${deviceId} exec-out screencap -p`,
      { encoding: 'buffer', maxBuffer: 50 * 1024 * 1024 }
    );

    // Sharpë¡œ ë¦¬ì‚¬ì´ì¦ˆ + JPEG ë³€í™˜ (ëŒ€ì—­í­ ìµœì í™”)
    const frame = await sharp(stdout)
      .resize({ width: Math.floor(1080 * opts.scale) })
      .jpeg({ quality: opts.quality })
      .toBuffer();

    // ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ì— ë°”ì´ë„ˆë¦¬ í”„ë ˆì„ ì „ì†¡
    for (const client of stream.clients) {
      if (client.readyState === WebSocket.OPEN) {
        client.send(frame, { binary: true });
      }
    }
  }
}
```

**í”„ë¡ íŠ¸ì—”ë“œ ì—°ê²°**:
```tsx
// useDeviceConnection.ts
const connectToStream = (deviceId: string) => {
  const ws = new WebSocket(`ws://${window.location.host}/ws/screen?deviceId=${deviceId}`);

  ws.binaryType = 'arraybuffer';  // ë°”ì´ë„ˆë¦¬ ë°ì´í„° ìˆ˜ì‹ 

  ws.onopen = () => {
    ws.send(JSON.stringify({ type: 'start', payload: { fps: 10, quality: 70 } }));
  };

  ws.onmessage = (event) => {
    // ArrayBuffer â†’ Blob â†’ Object URL
    const blob = new Blob([event.data], { type: 'image/jpeg' });
    const imageUrl = URL.createObjectURL(blob);
    setScreenshot(imageUrl);
  };

  return ws;
};

// DevicePreview.tsx
<img
  src={screenshot}  // WebSocketì—ì„œ ìˆ˜ì‹ í•œ ì´ë¯¸ì§€ URL
  alt="Device Screen"
  onClick={handleScreenClick}  // í´ë¦­ ì‹œ ì¢Œí‘œ ìº¡ì²˜
/>
```

### 4.5 í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸ & ë¹„ë””ì˜¤ ë…¹í™”

**êµ¬í˜„ ìœ„ì¹˜**: `backend/src/services/testReportService.ts`, `screenshotEventService.ts`

**ë¦¬í¬íŠ¸ êµ¬ì¡°**:
```typescript
interface TestReport {
  id: string;
  scenarioId: string;
  scenarioName: string;
  status: 'passed' | 'failed';
  duration: number;
  devices: DeviceReport[];
}

interface DeviceReport {
  deviceId: string;
  steps: StepResult[];
  screenshots: ScreenshotInfo[];
  video?: VideoInfo;
}

interface StepResult {
  nodeId: string;
  nodeType: string;
  status: 'passed' | 'failed' | 'waiting';
  duration: number;
  timestamp: string;
  error?: string;
}
```

**ë¹„ë””ì˜¤ ë…¹í™” (QA Recorder ì•±)**:

ADB screenrecordì˜ 3ë¶„ ì œí•œì„ í•´ê²°í•˜ê¸° ìœ„í•´ ë³„ë„ì˜ Android ì•±(QA Recorder)ì„ ê°œë°œí–ˆìŠµë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë…¹í™” ë°©ì‹ ë¹„êµ                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ë°©ì‹            â”‚ ì‹œê°„ ì œí•œ â”‚ Appium ì„¸ì…˜ â”‚ ë°©í–¥ ê°ì§€          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ADB screenrecordâ”‚ 3ë¶„       â”‚ ë…ë¦½ì       â”‚ X                  â”‚
â”‚  Appium ë…¹í™”     â”‚ 30ë¶„      â”‚ í•„ìš”        â”‚ X                  â”‚
â”‚  QA Recorder ì•±  â”‚ ë¬´ì œí•œ    â”‚ ë…ë¦½ì       â”‚ O (ìë™ ê°ì§€)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**QA Recorder ì•± êµ¬ì¡°** (`qa-recorder-app/`):
```kotlin
// RecorderService.kt - Android Foreground Service
class RecorderService : Service() {
  private var mediaProjection: MediaProjection? = null
  private var recordingManager: RecordingManager? = null

  // ë…¹í™” ì‹œì‘ (ADB ë¸Œë¡œë“œìºìŠ¤íŠ¸ë¡œ íŠ¸ë¦¬ê±°)
  fun startRecording(filename: String, bitrate: Int, resolution: String) {
    val (width, height) = parseResolution(resolution)
    val outputPath = recordingManager!!.startRecording(filename, width, height, bitrate)
    writeResult("recording", true, outputPath)  // ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ê¸°ë¡
  }
}

// RecordingManager.kt - MediaRecorder ê¸°ë°˜ í™”ë©´ ë…¹í™”
class RecordingManager(context: Context, mediaProjection: MediaProjection) {
  fun startRecording(filename: String, width: Int, height: Int, bitrate: Int): String {
    mediaRecorder = MediaRecorder().apply {
      setVideoSource(MediaRecorder.VideoSource.SURFACE)
      setOutputFormat(MediaRecorder.OutputFormat.MPEG_4)
      setVideoEncoder(MediaRecorder.VideoEncoder.H264)
      setVideoEncodingBitRate(bitrate)
      setVideoFrameRate(30)
      setVideoSize(width, height)
    }
    virtualDisplay = mediaProjection.createVirtualDisplay(...)
    mediaRecorder?.start()
  }
}
```

**Backend ì—°ë™** (`backend/src/services/videoAnalyzer/screenRecorder.ts`):
```typescript
class ScreenRecorder {
  // QA Recorder ì•±ìœ¼ë¡œ ë…¹í™” ì‹œì‘
  private async startDeviceAppRecording(deviceId: string, sessionId: string, options: RecordingOptions) {
    // ADBë¡œ ì•± ì„œë¹„ìŠ¤ í˜¸ì¶œ
    const command = `adb -s ${deviceId} shell am startservice \
      -a com.qaautomation.recorder.START_RECORDING \
      --es filename ${filename} \
      --ei bitrate ${bitrate} \
      -n com.qaautomation.recorder/.RecorderService`;

    await execAsync(command);

    // ê²°ê³¼ íŒŒì¼ í´ë§ (ì•±ì´ ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ê¸°ë¡)
    const resultPath = '/storage/emulated/0/Android/data/com.qaautomation.recorder/files/results/result.json';
    const result = await this.pollForResult(deviceId, resultPath, 'recording');

    return { success: result.success, sessionId };
  }

  // ë…¹í™” ì¤‘ì§€ í›„ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°
  async stopRecording(deviceId: string) {
    await execAsync(`adb -s ${deviceId} shell am startservice \
      -a com.qaautomation.recorder.STOP_RECORDING \
      -n com.qaautomation.recorder/.RecorderService`);

    // ë””ë°”ì´ìŠ¤ì—ì„œ ë¡œì»¬ë¡œ íŒŒì¼ ë³µì‚¬
    await execAsync(`adb -s ${deviceId} pull "${remotePath}" "${localPath}"`);
  }
}
```

**í†µì‹  íë¦„**:
```
Backend                      ADB                    QA Recorder App
   â”‚                          â”‚                           â”‚
   â”‚â”€â”€â”€ am startservice â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€â”€â”€ Intent â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚    (START_RECORDING)     â”‚                           â”‚
   â”‚                          â”‚                           â”‚â”€â”€ ë…¹í™” ì‹œì‘
   â”‚                          â”‚                           â”‚
   â”‚â—„â”€â”€ poll result.json â”€â”€â”€â”€â”€â”‚â—„â”€â”€â”€ íŒŒì¼ ì“°ê¸° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚                          â”‚                           â”‚
   â”‚â”€â”€â”€ am startservice â”€â”€â”€â”€â”€â–ºâ”‚â”€â”€â”€â”€ Intent â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚    (STOP_RECORDING)      â”‚                           â”‚
   â”‚                          â”‚                           â”‚â”€â”€ ë…¹í™” ì¤‘ì§€
   â”‚â—„â”€â”€ poll result.json â”€â”€â”€â”€â”€â”‚â—„â”€â”€â”€ íŒŒì¼ ì“°ê¸° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚                          â”‚                           â”‚
   â”‚â”€â”€â”€ adb pull â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â—„â”€â”€â”€ video.mp4 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
```

### 4.6 Suite ì‹¤í–‰ (ë‹¤ì¤‘ ì‹œë‚˜ë¦¬ì˜¤)

**êµ¬í˜„ ìœ„ì¹˜**: `backend/src/services/suiteExecutor.ts`, `suiteService.ts`

ì—¬ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ë¬¶ì–´ì„œ í•œ ë²ˆì— ì‹¤í–‰í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.

**Suite êµ¬ì¡°**:
```typescript
interface TestSuite {
  id: string;
  name: string;
  description?: string;
  scenarioIds: string[];     // ì‹¤í–‰í•  ì‹œë‚˜ë¦¬ì˜¤ ëª©ë¡
  deviceIds: string[];       // ì‹¤í–‰í•  ë””ë°”ì´ìŠ¤ ëª©ë¡
  createdAt: string;
  updatedAt: string;
}
```

**ì‹¤í–‰ íë¦„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Suite ì‹¤í–‰ íë¦„                           â”‚
â”‚                                                                 â”‚
â”‚  Suite: [ì‹œë‚˜ë¦¬ì˜¤A, ì‹œë‚˜ë¦¬ì˜¤B, ì‹œë‚˜ë¦¬ì˜¤C]                          â”‚
â”‚  Devices: [Device1, Device2]                                    â”‚
â”‚                                                                 â”‚
â”‚  Device1 (ë³‘ë ¬) â”€â”€â”¬â”€â”€ ì‹œë‚˜ë¦¬ì˜¤A â†’ ì‹œë‚˜ë¦¬ì˜¤B â†’ ì‹œë‚˜ë¦¬ì˜¤C (ìˆœì°¨)     â”‚
â”‚                   â”‚                                             â”‚
â”‚  Device2 (ë³‘ë ¬) â”€â”€â”´â”€â”€ ì‹œë‚˜ë¦¬ì˜¤A â†’ ì‹œë‚˜ë¦¬ì˜¤B â†’ ì‹œë‚˜ë¦¬ì˜¤C (ìˆœì°¨)     â”‚
â”‚                                                                 â”‚
â”‚  â€» ë””ë°”ì´ìŠ¤ ê°„: ë³‘ë ¬ ì‹¤í–‰                                        â”‚
â”‚  â€» ë””ë°”ì´ìŠ¤ ë‚´: ì‹œë‚˜ë¦¬ì˜¤ ìˆœì°¨ ì‹¤í–‰                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**í•µì‹¬ êµ¬í˜„**:
```typescript
// suiteExecutor.ts
class SuiteExecutor {
  async execute(
    suiteId: string,
    options: SuiteExecutionOptions = {}
  ): Promise<SuiteExecutionResult> {
    const suite = await suiteService.getSuiteById(suiteId);

    // ë””ë°”ì´ìŠ¤ ì ê¸ˆ íšë“
    const lockResult = deviceLockService.lockDevices(
      suite.deviceIds,
      executionId,
      options.requesterName || 'system'
    );

    if (!lockResult.success) {
      throw new Error(`ë””ë°”ì´ìŠ¤ ì‚¬ìš© ì¤‘: ${lockResult.busyDevices}`);
    }

    try {
      // ë””ë°”ì´ìŠ¤ë³„ ë³‘ë ¬ ì‹¤í–‰
      const deviceResults = await Promise.allSettled(
        suite.deviceIds.map(deviceId =>
          this.executeOnDevice(suite, deviceId, options)
        )
      );

      // Slack ì•Œë¦¼ (ì„¤ì •ëœ ê²½ìš°)
      await slackNotificationService.sendSuiteResult(result);

      return result;
    } finally {
      // ë””ë°”ì´ìŠ¤ ì ê¸ˆ í•´ì œ
      deviceLockService.unlockDevices(suite.deviceIds, executionId);
    }
  }

  // ë‹¨ì¼ ë””ë°”ì´ìŠ¤ì—ì„œ ì‹œë‚˜ë¦¬ì˜¤ ìˆœì°¨ ì‹¤í–‰
  private async executeOnDevice(
    suite: TestSuite,
    deviceId: string,
    options: SuiteExecutionOptions
  ): Promise<DeviceSuiteResult> {
    const results: ScenarioSuiteResult[] = [];

    for (const scenarioId of suite.scenarioIds) {
      // ì‹œë‚˜ë¦¬ì˜¤ ê°„ê²© ëŒ€ê¸°
      if (options.scenarioInterval && results.length > 0) {
        await this.sleep(options.scenarioInterval);
      }

      const result = await this.executeScenario(scenarioId, deviceId);
      results.push(result);

      // ì‹¤ì‹œê°„ ì§„í–‰ë¥  ë¸Œë¡œë“œìºìŠ¤íŠ¸
      eventEmitter.emit(SUITE_EVENTS.SCENARIO_COMPLETE, {
        suiteId: suite.id,
        deviceId,
        scenarioResult: result
      });
    }

    return { deviceId, scenarios: results };
  }
}
```

### 4.7 ë””ë°”ì´ìŠ¤ ì ê¸ˆ & ëŒ€ê¸°ì—´

**êµ¬í˜„ ìœ„ì¹˜**: `backend/src/services/deviceLockService.ts`, `testQueueService.ts`

ë‹¤ì¤‘ ì‚¬ìš©ì í™˜ê²½ì—ì„œ ë””ë°”ì´ìŠ¤ ë¦¬ì†ŒìŠ¤ ì¶©ëŒì„ ë°©ì§€í•©ë‹ˆë‹¤.

**ë””ë°”ì´ìŠ¤ ì ê¸ˆ íë¦„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì‚¬ìš©ì A                              ì‚¬ìš©ì B                    â”‚
â”‚     â”‚                                     â”‚                       â”‚
â”‚     â”‚â”€â”€ í…ŒìŠ¤íŠ¸ ìš”ì²­ (Device1) â”€â”€â–º         â”‚                       â”‚
â”‚     â”‚                                     â”‚                       â”‚
â”‚     â”‚â—„â”€â”€ ì ê¸ˆ íšë“, ì‹¤í–‰ ì‹œì‘            â”‚                       â”‚
â”‚     â”‚                                     â”‚                       â”‚
â”‚     â”‚    [Device1: Aê°€ ì‚¬ìš© ì¤‘]           â”‚â”€â”€ í…ŒìŠ¤íŠ¸ ìš”ì²­ (Device1)â”‚
â”‚     â”‚                                     â”‚                       â”‚
â”‚     â”‚                                     â”‚â—„â”€â”€ ëŒ€ê¸°ì—´ ì¶”ê°€        â”‚
â”‚     â”‚                                     â”‚    (ì˜ˆìƒ ëŒ€ê¸°: 3ë¶„)    â”‚
â”‚     â”‚                                     â”‚                       â”‚
â”‚     â”‚â”€â”€ í…ŒìŠ¤íŠ¸ ì™„ë£Œ â”€â”€â–º                   â”‚                       â”‚
â”‚     â”‚                                     â”‚                       â”‚
â”‚     â”‚â—„â”€â”€ ì ê¸ˆ í•´ì œ                        â”‚â—„â”€â”€ ìë™ ì‹¤í–‰ ì‹œì‘     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**DeviceLockService**:
```typescript
class DeviceLockService {
  private locks: Map<string, DeviceLock> = new Map();

  // ë””ë°”ì´ìŠ¤ ì ê¸ˆ ì‹œë„
  lockDevices(
    deviceIds: string[],
    executionId: string,
    userName: string
  ): { success: boolean; busyDevices?: string[] } {
    // ì´ë¯¸ ì ê¸´ ë””ë°”ì´ìŠ¤ í™•ì¸
    const busyDevices = deviceIds.filter(id => this.locks.has(id));

    if (busyDevices.length > 0) {
      return { success: false, busyDevices };
    }

    // ëª¨ë“  ë””ë°”ì´ìŠ¤ ì ê¸ˆ
    for (const deviceId of deviceIds) {
      this.locks.set(deviceId, {
        deviceId,
        executionId,
        lockedBy: userName,
        lockedAt: new Date()
      });
    }

    this.broadcastLockStatus();  // ì‹¤ì‹œê°„ UI ì—…ë°ì´íŠ¸
    return { success: true };
  }

  // ì ê¸ˆ í•´ì œ
  unlockDevices(deviceIds: string[], executionId: string): void {
    for (const deviceId of deviceIds) {
      const lock = this.locks.get(deviceId);
      if (lock?.executionId === executionId) {
        this.locks.delete(deviceId);
      }
    }
    this.broadcastLockStatus();
  }
}
```

**TestQueueService** (ëŒ€ê¸°ì—´ ê´€ë¦¬):
```typescript
class TestQueueService {
  private queue: ExecutionRequest[] = [];

  // ëŒ€ê¸°ì—´ì— ì¶”ê°€ (ìš°ì„ ìˆœìœ„ ê¸°ë°˜)
  addToQueue(request: ExecutionRequest): number {
    const position = this.insertByPriority(request);
    this.broadcastQueueStatus();
    return position;
  }

  // ì˜ˆìƒ ëŒ€ê¸° ì‹œê°„ ê³„ì‚°
  getEstimatedWaitTime(position: number): number {
    const avgTime = this.avgScenarioTime || 60000; // ê¸°ë³¸ 1ë¶„
    return position * avgTime;
  }

  // ë‹¤ìŒ ì‹¤í–‰ ê°€ëŠ¥í•œ ìš”ì²­ ê°€ì ¸ì˜¤ê¸°
  getNextExecutable(availableDevices: string[]): ExecutionRequest | null {
    return this.queue.find(req =>
      req.deviceIds.every(id => availableDevices.includes(id))
    );
  }
}
```

### 4.8 ë©”íŠ¸ë¦­ ëŒ€ì‹œë³´ë“œ

**êµ¬í˜„ ìœ„ì¹˜**: `backend/src/services/metricsCollector.ts`, `metricsAggregator.ts`, `metricsDatabase.ts`

í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë°ì´í„°ë¥¼ ìˆ˜ì§‘, ì§‘ê³„, ì‹œê°í™”í•©ë‹ˆë‹¤.

**ë©”íŠ¸ë¦­ ìˆ˜ì§‘ íŒŒì´í”„ë¼ì¸**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ testExecutor â”‚â”€â”€â”€â”€â–ºâ”‚metricsCollectorâ”‚â”€â”€â–ºâ”‚metricsDatabaseâ”‚â”€â”€â–ºâ”‚metricsAggregatorâ”‚
â”‚  (ì‹¤í–‰ ì™„ë£Œ)  â”‚     â”‚  (ë°ì´í„° ìˆ˜ì§‘) â”‚     â”‚  (JSON ì €ì¥)  â”‚     â”‚  (í†µê³„ ê³„ì‚°)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                       â”‚
                                                                       â–¼
                                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                              â”‚ MetricsDashboard â”‚
                                                              â”‚    (React)       â”‚
                                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ìˆ˜ì§‘ë˜ëŠ” ë©”íŠ¸ë¦­**:
| ì¹´í…Œê³ ë¦¬ | ë©”íŠ¸ë¦­ | ìš©ë„ |
|---------|--------|------|
| ì‹¤í–‰ í†µê³„ | ì´ ì‹¤í–‰ ìˆ˜, ì„±ê³µ/ì‹¤íŒ¨ ìˆ˜ | ì „ì²´ í˜„í™© íŒŒì•… |
| ì„±ê³µë¥  | ì¼ë³„/ì£¼ë³„ ì„±ê³µë¥  ì¶”ì´ | í’ˆì§ˆ íŠ¸ë Œë“œ ë¶„ì„ |
| ì‹¤í–‰ ì‹œê°„ | í‰ê· /ìµœëŒ€/ìµœì†Œ ì‹¤í–‰ ì‹œê°„ | ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ |
| ì‹¤íŒ¨ ë¶„ì„ | ì‹¤íŒ¨ ìœ í˜•ë³„ ë¶„ë¥˜ (ì´ë¯¸ì§€/í…ìŠ¤íŠ¸/íƒ€ì„ì•„ì›ƒ) | ë¬¸ì œ ì›ì¸ íŒŒì•… |
| ë””ë°”ì´ìŠ¤ë³„ | ë””ë°”ì´ìŠ¤ë³„ ì„±ê³µë¥ , ì‹¤í–‰ íšŸìˆ˜ | ë””ë°”ì´ìŠ¤ ê±´ê°• ìƒíƒœ |

**Frontend ëŒ€ì‹œë³´ë“œ** (`frontend/src/components/MetricsDashboard/`):
```tsx
// ì„±ê³µë¥  ì¶”ì´ ì°¨íŠ¸ (Recharts)
<LineChart data={dailyMetrics}>
  <Line dataKey="successRate" stroke="#00FF00" name="ì„±ê³µë¥  %" />
  <XAxis dataKey="date" />
  <YAxis domain={[0, 100]} />
</LineChart>

// ì‹¤íŒ¨ ìœ í˜• íŒŒì´ ì°¨íŠ¸
<PieChart>
  <Pie data={failureCategories} dataKey="count" nameKey="category" />
</PieChart>
```

---

## 5. ì½”ë“œ êµ¬ì¡°

### 5.1 ì „ì²´ ë””ë ‰í† ë¦¬

```
game-automation-tool/
â”œâ”€â”€ backend/                    # Express API ì„œë²„
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ index.ts           # ì•± ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ appium/            # Appium ê´€ë ¨
â”‚   â”‚   â”‚   â”œâ”€â”€ driver.ts      # ë“œë¼ì´ë²„ ì„¤ì •
â”‚   â”‚   â”‚   â””â”€â”€ actions/       # ë””ë°”ì´ìŠ¤ ì•¡ì…˜
â”‚   â”‚   â”‚       â”œâ”€â”€ tap.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ swipe.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ text.ts
â”‚   â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ services/          # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”‚   â”œâ”€â”€ testExecutor.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ testOrchestrator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ sessionManager.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ deviceManager.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ imageMatch.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ textMatcher/
â”‚   â”‚   â”‚   â””â”€â”€ execution/     # ì‹¤í–‰ ê´€ë ¨ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ routes/            # API ë¼ìš°íŠ¸
â”‚   â”‚   â”œâ”€â”€ middleware/        # ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚   â”œâ”€â”€ schemas/           # Zod ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â””â”€â”€ types/             # íƒ€ì… ì •ì˜
â”‚   â”œâ”€â”€ scenarios/             # ì‹œë‚˜ë¦¬ì˜¤ JSON
â”‚   â”œâ”€â”€ templates/             # ì´ë¯¸ì§€ í…œí”Œë¦¿
â”‚   â””â”€â”€ reports/               # í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸
â”‚
â”œâ”€â”€ frontend/                   # React ì›¹ í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.tsx           # ì•± ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ App.tsx            # ë©”ì¸ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ components/        # UI ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ Canvas/        # ë…¸ë“œ ì—ë””í„°
â”‚   â”‚   â”‚   â”œâ”€â”€ Panel/         # ì†ì„± íŒ¨ë„
â”‚   â”‚   â”‚   â”œâ”€â”€ DevicePreview/ # ë””ë°”ì´ìŠ¤ ë¯¸ë¦¬ë³´ê¸°
â”‚   â”‚   â”‚   â”œâ”€â”€ ExecutionCenter/
â”‚   â”‚   â”‚   â”œâ”€â”€ TestReports/
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ contexts/          # React Context
â”‚   â”‚   â”œâ”€â”€ hooks/             # ì»¤ìŠ¤í…€ í›…
â”‚   â”‚   â””â”€â”€ types/             # íƒ€ì… ì •ì˜
â”‚   â””â”€â”€ vite.config.ts
â”‚
â”œâ”€â”€ server-manager/             # Electron ì„œë²„ ê´€ë¦¬ ì•±
â”‚   â”œâ”€â”€ electron/              # ë©”ì¸ í”„ë¡œì„¸ìŠ¤
â”‚   â””â”€â”€ src/                   # React UI
â”‚
â”œâ”€â”€ qa-recorder-app/            # Android ë…¹í™” ì•± (Kotlin)
â”‚   â””â”€â”€ app/src/main/java/com/qaautomation/recorder/
â”‚       â”œâ”€â”€ MainActivity.kt    # ê¶Œí•œ ìš”ì²­ UI
â”‚       â”œâ”€â”€ RecorderService.kt # Foreground Service
â”‚       â”œâ”€â”€ RecordingManager.kt# MediaRecorder ê´€ë¦¬
â”‚       â”œâ”€â”€ ScreenshotManager.kt# ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜
â”‚       â””â”€â”€ OpenCVTemplateManager.kt # ì˜¨ë””ë°”ì´ìŠ¤ í…œí”Œë¦¿ ë§¤ì¹­
â”‚
â”œâ”€â”€ shared/                     # ê³µìœ  íƒ€ì…
â”‚   â””â”€â”€ types/
â”‚
â””â”€â”€ docs/                       # Wiki ë¬¸ì„œ
```

### 5.2 Backend í•µì‹¬ ëª¨ë“ˆ

| ëª¨ë“ˆ | íŒŒì¼ | ì—­í•  |
|------|------|------|
| **testOrchestrator** | `services/testOrchestrator.ts` | í…ŒìŠ¤íŠ¸ ìš”ì²­ ìˆ˜ì‹ , í ê´€ë¦¬, ë””ìŠ¤íŒ¨ì¹˜ |
| **testExecutor** | `services/testExecutor.ts` | ì‹œë‚˜ë¦¬ì˜¤ ë…¸ë“œ ìˆœíšŒ ë° ì‹¤í–‰ |
| **suiteExecutor** | `services/suiteExecutor.ts` | Suite ì‹¤í–‰ (ë‹¤ì¤‘ ì‹œë‚˜ë¦¬ì˜¤) |
| **sessionManager** | `services/sessionManager.ts` | Appium ì„¸ì…˜ ìƒëª…ì£¼ê¸° ê´€ë¦¬ |
| **deviceManager** | `services/deviceManager.ts` | ADB ë””ë°”ì´ìŠ¤ íƒìƒ‰, ìƒíƒœ ëª¨ë‹ˆí„°ë§ |
| **deviceLockService** | `services/deviceLockService.ts` | ë””ë°”ì´ìŠ¤ ì ê¸ˆ (ë‹¤ì¤‘ ì‚¬ìš©ì) |
| **testQueueService** | `services/testQueueService.ts` | í…ŒìŠ¤íŠ¸ ëŒ€ê¸°ì—´ ê´€ë¦¬ |
| **imageMatch** | `services/imageMatch.ts` | OpenCV í…œí”Œë¦¿ ë§¤ì¹­ |
| **textMatcher** | `services/textMatcher/` | OCR í…ìŠ¤íŠ¸ ì¸ì‹ |
| **metricsCollector** | `services/metricsCollector.ts` | ì‹¤í–‰ ë©”íŠ¸ë¦­ ìˆ˜ì§‘ |
| **r2Storage** | `services/r2Storage.ts` | Cloudflare R2 íŒŒì¼ ì €ì¥ |
| **Actions** | `appium/actions/` | ë””ë°”ì´ìŠ¤ ì•¡ì…˜ (tap, swipe ë“±) |

### 5.3 Frontend Context êµ¬ì¡°

```
App.tsx
â”œâ”€â”€ AuthContext           # ì¸ì¦ ìƒíƒœ
â”‚   â””â”€â”€ user, isAuthenticated, login(), logout()
â”‚
â”œâ”€â”€ DeviceContext         # ë””ë°”ì´ìŠ¤ ìƒíƒœ (10ì´ˆ í´ë§)
â”‚   â””â”€â”€ devices, sessions, startSession(), stopSession()
â”‚
â”œâ”€â”€ ExecutionContext      # ì‹¤í–‰ ìƒíƒœ (3ì´ˆ í´ë§)
â”‚   â””â”€â”€ queueStatus, executeTest(), stopExecution()
â”‚
â”œâ”€â”€ UIContext             # UI ìƒíƒœ
â”‚   â””â”€â”€ activeTab, modals
â”‚
â”œâ”€â”€ FlowEditorContext     # ë…¸ë“œ í¸ì§‘
â”‚   â””â”€â”€ nodes, connections, selectedNode, addNode()
â”‚
â”œâ”€â”€ ScenarioEditorContext # ì‹œë‚˜ë¦¬ì˜¤ ê´€ë¦¬
â”‚   â””â”€â”€ scenarios, packages, templates, save(), load()
â”‚
â””â”€â”€ EditorPreviewContext  # í”„ë¦¬ë·° ìƒíƒœ
    â””â”€â”€ previewDevice, highlight
```

---

## 6. ì£¼ìš” ì½”ë“œ ì„¤ëª…

### 6.1 ë…¸ë“œ ì‹¤í–‰ ì—”ì§„ (testExecutor.ts)

ì‹œë‚˜ë¦¬ì˜¤ì˜ ë…¸ë“œë¥¼ ìˆœíšŒí•˜ë©° ì‹¤í–‰í•˜ëŠ” í•µì‹¬ ë¡œì§ì…ë‹ˆë‹¤.
ì‹¤í–‰ ë¡œì§ì€ `execution/` ëª¨ë“ˆë¡œ ë¶„ë¦¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

```typescript
// backend/src/services/testExecutor.ts

class TestExecutor {
  private activeExecutions: Map<string, ExecutionState> = new Map();

  /**
   * ë‹¨ì¼ ë…¸ë“œ ì‹¤í–‰ (ì—ë””í„° í…ŒìŠ¤íŠ¸ìš©)
   */
  async executeSingleNode(
    deviceId: string,
    node: ExecutionNode,
    appPackage: string = 'com.example.app'
  ): Promise<{ success: boolean; error?: string; result?: ActionResult }> {
    const actions = sessionManager.getActions(deviceId);
    if (!actions) {
      return { success: false, error: 'ì„¸ì…˜ì´ ì—†ìŠµë‹ˆë‹¤.' };
    }

    try {
      // start/end ë…¸ë“œëŠ” ìŠ¤í‚µ
      if (node.type === 'start' || node.type === 'end') {
        return { success: true, result: null };
      }

      // ì•¡ì…˜ ë…¸ë“œ ì‹¤í–‰ (ActionExecutionServiceë¡œ ìœ„ì„)
      if (node.type === 'action') {
        const result = await this.executeActionNode(actions, node, appPackage);
        return { success: true, result };
      }

      // ì¡°ê±´ ë…¸ë“œ: ActionExecutionServiceë¡œ ìœ„ì„
      if (node.type === 'condition') {
        const conditionResult = await actionExecutionService.evaluateCondition(
          actions,
          node
        );
        return {
          success: true,
          result: {
            success: true,
            conditionResult: conditionResult.passed,
            branch: conditionResult.passed ? 'yes' : 'no'
          }
        };
      }

      return { success: true, result: null };
    } catch (err) {
      return { success: false, error: (err as Error).message };
    }
  }

  /**
   * ì¡°ê±´ ë…¸ë“œ í‰ê°€ (ActionExecutionServiceë¡œ ìœ„ì„)
   */
  private async evaluateCondition(
    actions: Actions,
    node: ExecutionNode
  ): Promise<boolean> {
    const result = await actionExecutionService.evaluateCondition(actions, node);
    return result.passed;
  }
}

// backend/src/services/execution/ActionExecutionService.ts

class ActionExecutionService {
  /**
   * ì¡°ê±´ ë…¸ë“œ í‰ê°€
   */
  async evaluateCondition(
    actions: Actions,
    node: ExecutableNode
  ): Promise<ConditionEvaluationResult> {
    const params = node.params || node.data || {};
    const conditionType = params.conditionType as string;
    const deviceId = actions.getDeviceId();

    switch (conditionType) {
      case 'elementExists': {
        const result = await actions.elementExists(
          params.selector,
          params.selectorType
        );
        return { passed: result.exists };
      }

      case 'imageExists':
      case 'imageNotExists': {
        const result = await actions.imageExists(params.templateId, {
          threshold: params.threshold,
          region: params.region
        });
        const expectExists = conditionType === 'imageExists';
        return { passed: expectExists ? result.exists : !result.exists };
      }

      case 'ocrTextExists':
      case 'ocrTextNotExists': {
        const result = await actions.ocrTextExists(params.text, {
          matchType: params.matchType || 'contains',
          caseSensitive: params.caseSensitive,
          region: params.region
        });
        const expectExists = conditionType === 'ocrTextExists';
        return { passed: expectExists ? result.exists : !result.exists };
      }

      default:
        return { passed: true };
    }
  }
}
```

### 6.2 ì´ë¯¸ì§€ ë§¤ì¹­ ì„œë¹„ìŠ¤ (imageMatch.ts)

```typescript
// backend/src/services/imageMatch.ts

class ImageMatchService {
  /**
   * í…œí”Œë¦¿ ì´ë¯¸ì§€ ë§¤ì¹­
   * @param screenshotBuffer - í˜„ì¬ í™”ë©´ ìŠ¤í¬ë¦°ìƒ· (Buffer)
   * @param templateId - í…œí”Œë¦¿ ID (templates.jsonì—ì„œ ê´€ë¦¬)
   * @param options - ë§¤ì¹­ ì˜µì…˜ (threshold, region, multiScale ë“±)
   */
  async matchTemplate(
    screenshotBuffer: Buffer,
    templateId: string,
    options: ImageMatchOptions = {}
  ): Promise<MatchResult> {
    const { threshold = 0.9, region, multiScale, grayscale = false } = options;

    // 1. í…œí”Œë¦¿ ì •ë³´ ì¡°íšŒ
    const template = this.getTemplate(templateId);
    if (!template) {
      throw new Error(`í…œí”Œë¦¿ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${templateId}`);
    }

    const templatePath = this.getTemplatePath(template);
    const templateBuffer = fs.readFileSync(templatePath);

    // 2. Sharpë¡œ ì´ë¯¸ì§€ ì „ì²˜ë¦¬
    let screenshotSharp = sharp(screenshotBuffer);
    const screenshotMetadata = await sharp(screenshotBuffer).metadata();
    const screenshotSize = {
      width: screenshotMetadata.width || 0,
      height: screenshotMetadata.height || 0,
    };

    // 3. ROI (Region of Interest) ì²˜ë¦¬
    let absoluteRegion: Region | undefined;
    if (region) {
      // ìƒëŒ€ ì¢Œí‘œ(0~1)ë¥¼ ì ˆëŒ€ ì¢Œí‘œë¡œ ë³€í™˜
      absoluteRegion = this.convertRegionToAbsolute(
        region,
        screenshotSize.width,
        screenshotSize.height
      );

      screenshotSharp = screenshotSharp.extract({
        left: absoluteRegion.x,
        top: absoluteRegion.y,
        width: absoluteRegion.width,
        height: absoluteRegion.height,
      });
    }

    // 4. OpenCV í…œí”Œë¦¿ ë§¤ì¹­ (ë‚´ë¶€ ë©”ì„œë“œ)
    let result: MatchResult;
    if (multiScale?.enabled) {
      result = await this.findBestMatchMultiScale(
        await screenshotSharp.png().toBuffer(),
        templateBuffer,
        threshold,
        absoluteRegion,
        multiScale
      );
    } else {
      result = await this.matchTemplateOpenCV(
        await screenshotSharp.png().toBuffer(),
        templateBuffer,
        threshold,
        absoluteRegion
      );
    }

    // 5. ì„±ëŠ¥ ë©”íŠ¸ë¦­ ì¶”ê°€
    result.metrics = {
      matchTime: Date.now() - startTime,
      templateId,
      templateName: template.name,
      threshold,
      roiUsed: !!region,
      screenshotSize,
    };

    return result;
  }

  /**
   * í•˜ì´ë¼ì´íŠ¸ ìŠ¤í¬ë¦°ìƒ· ìƒì„±
   */
  async createHighlightedScreenshot(
    screenshot: Buffer,
    matchResult: MatchResult,
    options: HighlightOptions = {}
  ): Promise<Buffer> {
    const { color = '#00FF00', strokeWidth = 4 } = options;

    if (!matchResult.found) {
      return screenshot;
    }

    const { x, y, width, height } = matchResult.location;

    // SVG ì˜¤ë²„ë ˆì´ ìƒì„±
    const overlay = Buffer.from(`
      <svg width="${width + strokeWidth * 2}" height="${height + strokeWidth * 2}">
        <rect
          x="${strokeWidth / 2}"
          y="${strokeWidth / 2}"
          width="${width}"
          height="${height}"
          fill="none"
          stroke="${color}"
          stroke-width="${strokeWidth}"
        />
      </svg>
    `);

    // ìŠ¤í¬ë¦°ìƒ·ì— ì˜¤ë²„ë ˆì´ í•©ì„±
    return sharp(screenshot)
      .composite([{
        input: overlay,
        left: x - strokeWidth / 2,
        top: y - strokeWidth / 2
      }])
      .png()
      .toBuffer();
  }
}
```

### 6.3 ì„¸ì…˜ ê´€ë¦¬ (sessionManager.ts)

```typescript
// backend/src/services/sessionManager.ts

// ì„¸ì…˜ ì •ë³´ (types/index.ts)
interface SessionInfo {
  deviceId: string;
  sessionId: string;
  appiumPort: number;
  mjpegPort: number;
  createdAt: Date;
  status: 'active' | 'idle' | 'error';
}

// ê´€ë¦¬ë˜ëŠ” ì„¸ì…˜ (ë‚´ë¶€)
interface ManagedSession {
  driver: Browser;           // WebdriverIO Browser ì¸ìŠ¤í„´ìŠ¤
  actions: Actions;          // ë””ë°”ì´ìŠ¤ ì•¡ì…˜ ì¸ìŠ¤í„´ìŠ¤
  info: SessionInfo;         // ì„¸ì…˜ ì •ë³´
}

class SessionManager {
  private sessions: Map<string, ManagedSession> = new Map();
  private nextAppiumPort = 4723;
  private nextMjpegPort = 9100;

  /**
   * Appium ì„¸ì…˜ ìƒì„±
   */
  async createSession(deviceId: string): Promise<ManagedSession> {
    // ì´ë¯¸ ì„¸ì…˜ì´ ìˆìœ¼ë©´ ë°˜í™˜
    if (this.sessions.has(deviceId)) {
      return this.sessions.get(deviceId)!;
    }

    const appiumPort = this.nextAppiumPort++;
    const mjpegPort = this.nextMjpegPort++;

    // WebdriverIO Capabilities ì„¤ì •
    const capabilities = {
      platformName: 'Android',
      'appium:deviceName': deviceId,
      'appium:udid': deviceId,
      'appium:automationName': 'UiAutomator2',
      'appium:noReset': true,
      'appium:mjpegServerPort': mjpegPort,
      'appium:newCommandTimeout': 300
    };

    // WebdriverIO ë“œë¼ì´ë²„ ìƒì„±
    const driver = await remote({
      hostname: 'localhost',
      port: 4900,  // Appium ì„œë²„ í¬íŠ¸
      path: '/',
      capabilities
    });

    // Actions ì¸ìŠ¤í„´ìŠ¤ ìƒì„± (ë“œë¼ì´ë²„ ì£¼ì…)
    const actions = new Actions(
      () => driver,  // DriverProvider
      deviceId
    );

    const session: ManagedSession = {
      driver,
      actions,
      info: {
        deviceId,
        sessionId: driver.sessionId,
        appiumPort,
        mjpegPort,
        status: 'active',
        createdAt: new Date()
      }
    };

    this.sessions.set(deviceId, session);

    console.log(`[SessionManager] Session created for ${deviceId}`);

    return session.info;  // SessionInfo ë°˜í™˜
  }

  /**
   * ì„¸ì…˜ ì¢…ë£Œ
   */
  async destroySession(deviceId: string): Promise<void> {
    const session = this.sessions.get(deviceId);
    if (!session) return;

    try {
      await session.driver.deleteSession();
    } catch (error) {
      console.warn(`[SessionManager] Error destroying session: ${error}`);
    }

    this.sessions.delete(deviceId);
    console.log(`[SessionManager] Session destroyed for ${deviceId}`);
  }

  /**
   * Actions ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜
   */
  getActions(deviceId: string): Actions | null {
    return this.sessions.get(deviceId)?.actions || null;
  }

  /**
   * ë“œë¼ì´ë²„ ë°˜í™˜
   */
  getDriver(deviceId: string): Browser | null {
    return this.sessions.get(deviceId)?.driver || null;
  }
}

export const sessionManager = new SessionManager();
```

### 6.4 ë””ë°”ì´ìŠ¤ ì•¡ì…˜ (Actions í´ë˜ìŠ¤)

Actions í´ë˜ìŠ¤ëŠ” ê¸°ëŠ¥ë³„ë¡œ ë¶„ë¦¬ëœ ì„œë¸Œ í´ë˜ìŠ¤ì— ìœ„ì„í•©ë‹ˆë‹¤.

```typescript
// backend/src/appium/actions/index.ts

type DriverProvider = () => Promise<Browser>;

export class Actions {
  // ì„œë¸Œ í´ë˜ìŠ¤ (ê¸°ëŠ¥ë³„ ë¶„ë¦¬)
  private touchActions: TouchActions;
  private elementActions: ElementActions;
  private textActions: TextActions;
  private imageActions: ImageActions;
  private waitActions: WaitActions;
  private appActions: AppActions;
  private deviceActions: DeviceActions;

  constructor(
    private driverProvider: DriverProvider,
    private deviceId: string
  ) {
    // ê° ì„œë¸Œ í´ë˜ìŠ¤ì— ë“œë¼ì´ë²„ í”„ë¡œë°”ì´ë” ì£¼ì…
    this.touchActions = new TouchActions(driverProvider, deviceId);
    this.elementActions = new ElementActions(driverProvider, deviceId);
    this.textActions = new TextActions(driverProvider, deviceId);
    this.imageActions = new ImageActions(driverProvider, deviceId);
    this.waitActions = new WaitActions(driverProvider, deviceId);
    this.appActions = new AppActions(driverProvider, deviceId);
    this.deviceActions = new DeviceActions(driverProvider, deviceId);
  }

  // í„°ì¹˜ ì•¡ì…˜ (TouchActionsë¡œ ìœ„ì„)
  async tap(x: number, y: number) {
    return this.touchActions.tap(x, y);
  }

  async longPress(x: number, y: number, duration?: number) {
    return this.touchActions.longPress(x, y, duration);
  }

  async swipe(startX: number, startY: number, endX: number, endY: number, duration?: number) {
    return this.touchActions.swipe(startX, startY, endX, endY, duration);
  }

  // ì´ë¯¸ì§€ ì•¡ì…˜ (ImageActionsë¡œ ìœ„ì„)
  async tapImage(templateId: string, options?: ImageMatchOptions) {
    return this.imageActions.tapImage(templateId, options);
  }

  async imageExists(templateId: string, options?: ImageMatchOptions) {
    return this.imageActions.imageExists(templateId, options);
  }

  // ëŒ€ê¸° ì•¡ì…˜ (WaitActionsë¡œ ìœ„ì„)
  async waitUntilImage(templateId: string, timeout?: number, options?: ImageMatchOptions) {
    return this.waitActions.waitUntilImage(templateId, timeout, options);
  }

  async waitUntilImageGone(templateId: string, timeout?: number, options?: ImageMatchOptions) {
    return this.waitActions.waitUntilImageGone(templateId, timeout, options);
  }

  // OCR ì•¡ì…˜ (TextActionsë¡œ ìœ„ì„)
  async ocrTextExists(text: string, options?: OcrOptions) {
    return this.textActions.ocrTextExists(text, options);
  }

  async tapTextOcr(text: string, options?: OcrOptions) {
    return this.textActions.tapTextOcr(text, options);
  }

  // ì•± ì•¡ì…˜ (AppActionsë¡œ ìœ„ì„)
  async launchApp(packageName: string) {
    return this.appActions.launchApp(packageName);
  }

  async terminateApp(packageName: string) {
    return this.appActions.terminateApp(packageName);
  }

  // ìœ í‹¸ë¦¬í‹°
  getDeviceId(): string {
    return this.deviceId;
  }

  reset(): void {
    this.touchActions.reset();
    this.waitActions.reset();
    // ... ê° ì„œë¸Œ í´ë˜ìŠ¤ ë¦¬ì…‹
  }
}

// backend/src/appium/actions/touch.ts

export class TouchActions extends ActionsBase {
  async tap(x: number, y: number, options: RetryOptions = {}): Promise<ActionResult> {
    const tapX = Math.floor(x);
    const tapY = Math.floor(y);

    return this.withRetry(async () => {
      const driver = await this.getDriver();

      console.log(`[${this.deviceId}] íƒ­ ì‹¤í–‰: (${tapX}, ${tapY})`);

      await driver
        .action('pointer', { parameters: { pointerType: 'touch' } })
        .move({ x: tapX, y: tapY })
        .down()
        .up()
        .perform();

      return { success: true, action: 'tap', x: tapX, y: tapY };
    }, options);
  }

  async swipe(
    startX: number, startY: number,
    endX: number, endY: number,
    duration: number = 300
  ): Promise<ActionResult> {
    return this.withRetry(async () => {
      const driver = await this.getDriver();

      console.log(`[${this.deviceId}] ìŠ¤ì™€ì´í”„: (${startX},${startY}) â†’ (${endX},${endY})`);

      await driver
        .action('pointer', { parameters: { pointerType: 'touch' } })
        .move({ x: startX, y: startY })
        .down()
        .move({ x: endX, y: endY, duration })
        .up()
        .perform();

      return { success: true, action: 'swipe' };
    });
  }
}
```

### 6.5 ì‹¤ì‹œê°„ í†µì‹  (Socket.IO)

```typescript
// backend/src/index.ts

import { Server as SocketIOServer } from 'socket.io';

const io = new SocketIOServer(httpServer, {
  cors: { origin: '*' }
});

// í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì„œë¹„ìŠ¤ì— Socket.IO ì¸ìŠ¤í„´ìŠ¤ ì „ë‹¬
testOrchestrator.setSocketIO(io);

io.on('connection', (socket) => {
  console.log('Client connected:', socket.id);

  // ë””ë°”ì´ìŠ¤ ìƒíƒœ êµ¬ë…
  socket.on('subscribe:device', (deviceId: string) => {
    socket.join(`device:${deviceId}`);
  });

  socket.on('disconnect', () => {
    console.log('Client disconnected:', socket.id);
  });
});

// í…ŒìŠ¤íŠ¸ ì§„í–‰ë¥  ë¸Œë¡œë“œìºìŠ¤íŠ¸ ì˜ˆì‹œ
// testExecutor.tsì—ì„œ í˜¸ì¶œ
this.io.emit('test:progress', {
  executionId,
  deviceId,
  progress: (completedSteps / totalSteps) * 100,
  currentStep: completedSteps,
  totalSteps
});

this.io.emit('test:step', {
  executionId,
  deviceId,
  step: {
    nodeId: node.id,
    status: 'passed',
    duration: 1500
  }
});

this.io.emit('test:complete', {
  executionId,
  deviceId,
  status: 'passed',
  duration: totalDuration
});
```

---

## 7. ì„¤ì¹˜ ë° ì‹¤í–‰

### 7.1 ì‚¬ì „ ìš”êµ¬ì‚¬í•­

| í•­ëª© | ë²„ì „ | ì„¤ì¹˜ ëª…ë ¹ |
|------|------|----------|
| Node.js | 22.x LTS | https://nodejs.org |
| JDK | 17+ | `choco install openjdk17` |
| Android SDK | - | Android Studio ì„¤ì¹˜ |
| Appium | 2.x | `npm install -g appium` |
| UiAutomator2 | - | `appium driver install uiautomator2` |
| OpenCV | 4.x | `choco install opencv` |
| FFmpeg | - | `choco install ffmpeg` |

### 7.2 QA Recorder ì•± ì„¤ì¹˜ (í•„ìˆ˜)

QA RecorderëŠ” í…ŒìŠ¤íŠ¸ ëŒ€ìƒ ë””ë°”ì´ìŠ¤ì— **ë°˜ë“œì‹œ ì„¤ì¹˜í•´ì•¼ í•˜ëŠ” Android ì•±**ì…ë‹ˆë‹¤.

#### ì—­í• 
| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| ë¹„ë””ì˜¤ ë…¹í™” | MediaProjection APIë¡œ í™”ë©´ ë…¹í™” (ì‹œê°„ ë¬´ì œí•œ) |
| ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜ | ADB Broadcastë¡œ ìŠ¤í¬ë¦°ìƒ· ì´¬ì˜ |
| í…œí”Œë¦¿ ë§¤ì¹­ | ë””ë°”ì´ìŠ¤ ë‚´ OpenCVë¡œ ì´ë¯¸ì§€ ë§¤ì¹­ |

#### APK ë¹Œë“œ ë° ì„¤ì¹˜
```bash
# APK ë¹Œë“œ (ìµœì´ˆ 1íšŒ)
cd qa-recorder-app
./gradlew assembleDebug
# ê²°ê³¼: app/build/outputs/apk/debug/app-debug.apk

# ë””ë°”ì´ìŠ¤ ì„¤ì¹˜
adb install -r app/build/outputs/apk/debug/app-debug.apk

# ì—¬ëŸ¬ ë””ë°”ì´ìŠ¤ì— ì¼ê´„ ì„¤ì¹˜
for device in $(adb devices | grep -w device | cut -f1); do
  adb -s $device install -r app/build/outputs/apk/debug/app-debug.apk
done
```

#### ë””ë°”ì´ìŠ¤ ì„¤ì • (ë””ë°”ì´ìŠ¤ë³„ ìµœì´ˆ 1íšŒ)
1. ë””ë°”ì´ìŠ¤ì—ì„œ **QA Recorder** ì•± ì‹¤í–‰
2. **ê¶Œí•œ í—ˆìš©** ë²„íŠ¼ í´ë¦­ â†’ ì €ì¥ì†Œ, ì•Œë¦¼ ê¶Œí•œ í—ˆìš©
3. **ì„œë¹„ìŠ¤ ì‹œì‘** ë²„íŠ¼ í´ë¦­
4. í™”ë©´ ë…¹í™” ê¶Œí•œ íŒì—…ì—ì„œ **í—ˆìš©**
5. ìƒíƒœê°€ **"ì¤€ë¹„ ì™„ë£Œ"**ë¡œ ë³€ê²½ë˜ë©´ ì„¤ì • ì™„ë£Œ

> âš ï¸ **ì£¼ì˜**: QA Recorder ì„œë¹„ìŠ¤ê°€ ì‹œì‘ë˜ì§€ ì•Šìœ¼ë©´ ë¹„ë””ì˜¤ ë…¹í™” ê¸°ëŠ¥ì´ ë™ì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

#### ê¸°ìˆ  ìŠ¤í™
| í•­ëª© | ê°’ |
|------|------|
| íŒ¨í‚¤ì§€ëª… | `com.qaautomation.recorder` |
| ìµœì†Œ Android | 5.0 (API 21) |
| íƒ€ê²Ÿ Android | 14 (API 34) |
| ë²„ì „ | 1.1.0 |
| ì–¸ì–´ | Kotlin |

### 7.3 ì„¤ì¹˜

```bash
# 1. ë ˆí¬ì§€í† ë¦¬ í´ë¡ 
git clone https://github.com/kws0109/QA_Automation.git
cd QA_Automation

# 2. Backend ì˜ì¡´ì„± ì„¤ì¹˜
cd backend && npm install

# 3. Frontend ì˜ì¡´ì„± ì„¤ì¹˜
cd ../frontend && npm install

# 4. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp backend/.env.example backend/.env
# .env íŒŒì¼ í¸ì§‘
```

### 7.3.1 Google Cloud Vision API ì„¤ì • (OCR ì‚¬ìš© ì‹œ í•„ìˆ˜)

OCR í…ìŠ¤íŠ¸ ì¸ì‹ ê¸°ëŠ¥(`tapOcrText`, `waitUntilTextExists` ë“±)ì„ ì‚¬ìš©í•˜ë ¤ë©´ Google Cloud Vision API ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.

#### ì„¤ì • ë‹¨ê³„
1. [Google Cloud Console](https://console.cloud.google.com) ì ‘ì†
2. í”„ë¡œì íŠ¸ ìƒì„± ë˜ëŠ” ê¸°ì¡´ í”„ë¡œì íŠ¸ ì„ íƒ
3. **APIs & Services** > **Library** > "Cloud Vision API" ê²€ìƒ‰ í›„ **Enable**
4. **APIs & Services** > **Credentials** > **Create Credentials** > **Service Account**
5. ì„œë¹„ìŠ¤ ê³„ì • ì´ë¦„ ì…ë ¥ í›„ ìƒì„±
6. ìƒì„±ëœ ì„œë¹„ìŠ¤ ê³„ì • í´ë¦­ > **Keys** íƒ­ > **Add Key** > **Create new key** > **JSON**
7. ë‹¤ìš´ë¡œë“œëœ JSON íŒŒì¼ì„ `backend/` í´ë”ì— ì €ì¥ (ì˜ˆ: `google-vision-key.json`)
8. `backend/.env` íŒŒì¼ì— ê²½ë¡œ ì„¤ì •:

```bash
GOOGLE_APPLICATION_CREDENTIALS=./google-vision-key.json
```

#### ìš”ê¸ˆ ì •ë³´
| í•­ëª© | ë¬´ë£Œ í‹°ì–´ | ì´ˆê³¼ ì‹œ |
|------|----------|--------|
| TEXT_DETECTION | 1,000íšŒ/ì›” | $1.50/1,000íšŒ |

> âš ï¸ **ì£¼ì˜**: `google-vision-key.json` íŒŒì¼ì€ `.gitignore`ì— í¬í•¨ë˜ì–´ ìˆì–´ Gitì— ì»¤ë°‹ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. íŒŒì¼ì„ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•˜ì„¸ìš”.

### 7.4 ì‹¤í–‰

```bash
# Terminal 1: Appium ì„œë²„
appium --port 4900 --allow-insecure=uiautomator2:adb_shell

# Terminal 2: Backend
cd backend && npm run dev

# Terminal 3: Frontend
cd frontend && npm run dev
```

**ì ‘ì†**: http://localhost:5173

### 7.5 Server Manager ì‚¬ìš© (ê¶Œì¥)

**Server Manager**ëŠ” Backend, Frontend, Appiumì„ ì›í´ë¦­ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” Electron ì•±ì…ë‹ˆë‹¤.

```bash
# ê°œë°œ ëª¨ë“œ ì‹¤í–‰
cd server-manager && npm install && npm run electron:dev

# Windows EXE íŒ¨í‚¤ì§•
npm run build
# release/ í´ë”ì— portable exe ìƒì„±
```

**ì£¼ìš” ê¸°ëŠ¥:**
- ì›í´ë¦­ Start All / Stop All
- ì‹¤ì‹œê°„ ë¡œê·¸ ë·°ì–´
- í¬íŠ¸ ì„¤ì • UI (.env ìë™ ë™ê¸°í™”)
- ì‹œìŠ¤í…œ íŠ¸ë ˆì´ ì§€ì›

```typescript
// electron/processManager.ts
export class ProcessManager {
  // ì„œë²„ ì‹œì‘ (ìˆœì°¨ ì‹¤í–‰: Backend â†’ Appium â†’ Frontend)
  async startAll(): Promise<void> {
    await this.start('backend');
    await this.start('appium');
    await this.start('frontend');
  }

  // í¬íŠ¸ ì¶©ëŒ ì‚¬ì „ ì²´í¬
  private async isPortInUse(port: number): Promise<boolean> {
    return new Promise((resolve) => {
      const server = net.createServer();
      server.once('error', () => resolve(true));
      server.once('listening', () => {
        server.close();
        resolve(false);
      });
      server.listen(port, '127.0.0.1');
    });
  }
}
```

---

## 8. ì™¸ë¶€ ì ‘ê·¼ ë° ë°°í¬

### 8.1 LAN ë‚´ë¶€ ì ‘ê·¼

ê°™ì€ ë„¤íŠ¸ì›Œí¬ì˜ ë‹¤ë¥¸ PC/ëª¨ë°”ì¼ì—ì„œ ì ‘ê·¼í•˜ëŠ” ë°©ë²•:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ê°™ì€ ë„¤íŠ¸ì›Œí¬ (LAN)                      â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   ì„œë²„ PC       â”‚         â”‚   í´ë¼ì´ì–¸íŠ¸     â”‚           â”‚
â”‚  â”‚  192.168.1.100  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  (ë‹¤ë¥¸ PC/ëª¨ë°”ì¼) â”‚           â”‚
â”‚  â”‚  Backend :3001  â”‚   HTTP  â”‚  ë¸Œë¼ìš°ì € ì ‘ì†    â”‚           â”‚
â”‚  â”‚  Frontend:5173  â”‚         â”‚                 â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**í™˜ê²½ë³€ìˆ˜ ì„¤ì •:**

```bash
# backend/.env
PORT=3001
HOST=0.0.0.0  # ì™¸ë¶€ ì ‘ê·¼ í—ˆìš© (ì¤‘ìš”!)

# frontend/.env
VITE_SERVER_HOST=192.168.1.100  # ì„œë²„ PC IP
VITE_BACKEND_PORT=3001
```

**ë°©í™”ë²½ ì„¤ì • (Windows):**
```powershell
# PowerShell (ê´€ë¦¬ì ê¶Œí•œ)
netsh advfirewall firewall add rule name="QA Backend" dir=in action=allow protocol=TCP localport=3001
netsh advfirewall firewall add rule name="QA Frontend" dir=in action=allow protocol=TCP localport=5173
```

### 8.2 Cloudflare Tunnel (ì¸í„°ë„· ì ‘ê·¼)

ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬(ì¸í„°ë„·)ì—ì„œ ì ‘ê·¼í•˜ë ¤ë©´ **Cloudflare Tunnel**ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ì¸í„°ë„·                                    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ì™¸ë¶€ ì‚¬ìš©ì    â”‚   â”‚  Cloudflare  â”‚   â”‚    ì„œë²„ PC      â”‚    â”‚
â”‚  â”‚  (ì–´ë””ì„œë“ )     â”‚â”€â”€â–ºâ”‚   Edge       â”‚â—„â”€â”€â”‚  cloudflared    â”‚    â”‚
â”‚  â”‚                â”‚   â”‚              â”‚   â”‚  (í„°ë„ í´ë¼ì´ì–¸íŠ¸)â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚        â–²                                          â”‚              â”‚
â”‚        â”‚  HTTPS                                   â”‚ HTTP         â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                  â”‚
â”‚   https://qa-automation-tool.dev â†’ localhost:5173                â”‚
â”‚   https://api.qa-automation-tool.dev â†’ localhost:3001            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Cloudflare Tunnel ì„¤ì •:**

```bash
# 1. cloudflared ì„¤ì¹˜ (Windows)
choco install cloudflared

# 2. Cloudflare ë¡œê·¸ì¸
cloudflared tunnel login

# 3. í„°ë„ ìƒì„±
cloudflared tunnel create qa-automation

# 4. DNS ë ˆì½”ë“œ ì¶”ê°€
cloudflared tunnel route dns qa-automation qa-automation-tool.dev
cloudflared tunnel route dns qa-automation api.qa-automation-tool.dev

# 5. í„°ë„ ì‹¤í–‰
cloudflared tunnel run qa-automation
```

**config.yml (Cloudflare ì„¤ì • íŒŒì¼):**
```yaml
# ~/.cloudflared/config.yml
tunnel: qa-automation
credentials-file: ~/.cloudflared/{tunnel-id}.json

ingress:
  # Frontend
  - hostname: qa-automation-tool.dev
    service: http://localhost:5173
  # Backend API + WebSocket
  - hostname: api.qa-automation-tool.dev
    service: http://localhost:3001
  # Catch-all
  - service: http_status:404
```

**í™˜ê²½ë³€ìˆ˜ ì„¤ì • (Cloudflare ëª¨ë“œ):**
```bash
# frontend/.env
VITE_SERVER_HOST=api.qa-automation-tool.dev
VITE_BACKEND_PORT=443
VITE_API_URL=https://api.qa-automation-tool.dev
VITE_WS_STREAM_URL=wss://api.qa-automation-tool.dev

# backend/.env
SLACK_REDIRECT_URI=https://api.qa-automation-tool.dev/auth/slack/callback
FRONTEND_URL=https://qa-automation-tool.dev
```

**ë¹„ìš©:**
| í•­ëª© | ë¹„ìš© |
|------|------|
| ë„ë©”ì¸ (.dev) | ~$12/ë…„ |
| Cloudflare DNS | ë¬´ë£Œ |
| Cloudflare Tunnel | ë¬´ë£Œ |
| **ì´í•©** | **~$12/ë…„** |

### 8.3 ë™ì  API URL ì²˜ë¦¬

FrontendëŠ” í™˜ê²½ì— ë”°ë¼ ìë™ìœ¼ë¡œ API URLì„ ê²°ì •í•©ë‹ˆë‹¤:

```typescript
// frontend/src/config/api.ts
export const SERVER_HOST =
  import.meta.env.VITE_SERVER_HOST ||   // í™˜ê²½ë³€ìˆ˜ ìš°ì„ 
  window.location.hostname ||            // ë¸Œë¼ìš°ì € ì ‘ì† í˜¸ìŠ¤íŠ¸
  '127.0.0.1';                          // ê¸°ë³¸ê°’

export const API_URL =
  import.meta.env.VITE_API_URL ||
  `http://${SERVER_HOST}:${BACKEND_PORT}`;

export const WS_STREAM_URL =
  import.meta.env.VITE_WS_STREAM_URL ||
  `ws://${SERVER_HOST}:${BACKEND_PORT}`;
```

**URL ê²°ì • ìš°ì„ ìˆœìœ„:**
```
1. VITE_API_URL (ì§ì ‘ ì§€ì •)
2. VITE_SERVER_HOST + VITE_BACKEND_PORT (ì¡°í•©)
3. window.location.hostname (ë¸Œë¼ìš°ì € ì ‘ì† í˜¸ìŠ¤íŠ¸)
4. 127.0.0.1 (ê¸°ë³¸ê°’)
```

### 8.4 R2 í´ë¼ìš°ë“œ ì €ì¥ì†Œ (ë¦¬í¬íŠ¸ ê³µìœ )

**êµ¬í˜„ ìœ„ì¹˜**: `backend/src/services/r2Storage.ts`, `r2Uploader.ts`

Cloudflare R2ë¥¼ ì‚¬ìš©í•´ í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸ë¥¼ í´ë¼ìš°ë“œì— ì €ì¥í•˜ê³  ê³µìœ  ë§í¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ë¦¬í¬íŠ¸ ê³µìœ  íë¦„                            â”‚
â”‚                                                                 â”‚
â”‚  í…ŒìŠ¤íŠ¸ ì™„ë£Œ â”€â”€â–º ë¦¬í¬íŠ¸ ìƒì„± â”€â”€â–º R2 ì—…ë¡œë“œ â”€â”€â–º ê³µìœ  URL ìƒì„±      â”‚
â”‚                 (HTML/PDF)       (ì„ íƒì )      https://...       â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ reportExporterâ”‚â”€â”€â”€â”€â–ºâ”‚  r2Storage   â”‚â”€â”€â”€â”€â–ºâ”‚ ê³µê°œ URL     â”‚    â”‚
â”‚  â”‚ (PDF ìƒì„±)    â”‚     â”‚ (R2 ì—…ë¡œë“œ)   â”‚     â”‚ qa.r2.dev/..â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**R2 ì„¤ì •:**
```bash
# backend/.env
R2_ENABLED=true
R2_ACCOUNT_ID=your-account-id
R2_ACCESS_KEY_ID=your-access-key
R2_SECRET_ACCESS_KEY=your-secret-key
R2_BUCKET_NAME=qa-reports
R2_PUBLIC_URL=https://qa-reports.r2.dev
```

**í•µì‹¬ êµ¬í˜„:**
```typescript
// r2Storage.ts
class R2StorageService {
  private client: S3Client;

  async uploadHTML(reportId: string, html: string): Promise<string> {
    const key = `reports/${reportId}/report.html`;

    await this.client.send(new PutObjectCommand({
      Bucket: this.config.bucketName,
      Key: key,
      Body: html,
      ContentType: 'text/html'
    }));

    return this.getPublicUrl(key);
  }

  async uploadVideo(reportId: string, deviceId: string, buffer: Buffer): Promise<string> {
    const key = `reports/${reportId}/videos/${deviceId}.mp4`;

    await this.client.send(new PutObjectCommand({
      Bucket: this.config.bucketName,
      Key: key,
      Body: buffer,
      ContentType: 'video/mp4'
    }));

    return this.getPublicUrl(key);
  }

  getPublicUrl(key: string): string {
    return `${this.config.publicUrl}/${key}`;
  }
}
```

**ë¹„ìš©:**
| í•­ëª© | Cloudflare R2 |
|------|--------------|
| ì €ì¥ì†Œ | 10GB ë¬´ë£Œ, ì´í›„ $0.015/GB/ì›” |
| ì½ê¸° | ë¬´ë£Œ (egress ë¬´ë£Œ) |
| ì“°ê¸° | 100ë§Œ ìš”ì²­ ë¬´ë£Œ |

---

## 9. í…ŒìŠ¤íŠ¸ ë°©ë²•

### 9.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

```bash
# Frontend
cd frontend && npm run test

# ì»¤ë²„ë¦¬ì§€
npm run test:coverage
```

### 9.2 ë¹Œë“œ ê²€ì¦

```bash
# Backend íƒ€ì… ì²´í¬ + ë¹Œë“œ
cd backend && npm run typecheck && npm run build

# Frontend ë¦°íŠ¸ + ë¹Œë“œ
cd frontend && npm run lint && npm run build
```

### 9.3 E2E í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

1. **ë””ë°”ì´ìŠ¤ ì—°ê²° í™•ì¸**
   - ADB ì—°ê²°ëœ ë””ë°”ì´ìŠ¤ê°€ ëª©ë¡ì— í‘œì‹œë˜ëŠ”ì§€
   - ì„¸ì…˜ ì‹œì‘/ì¢…ë£Œ ë™ì‘

2. **ì‹œë‚˜ë¦¬ì˜¤ í¸ì§‘**
   - ë…¸ë“œ ì¶”ê°€, ì—°ê²°, ì‚­ì œ
   - ì†ì„± í¸ì§‘
   - ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°

3. **í…ŒìŠ¤íŠ¸ ì‹¤í–‰**
   - ë‹¨ì¼ ë””ë°”ì´ìŠ¤ ì‹¤í–‰
   - ë‹¤ì¤‘ ë””ë°”ì´ìŠ¤ ë³‘ë ¬ ì‹¤í–‰
   - ì‹¤ì‹œê°„ ì§„í–‰ë¥  í‘œì‹œ

4. **ë¦¬í¬íŠ¸ í™•ì¸**
   - ìŠ¤í¬ë¦°ìƒ· í‘œì‹œ
   - ë¹„ë””ì˜¤ ì¬ìƒ
   - HTML/PDF ë‚´ë³´ë‚´ê¸°

---

## 10. ì„±ëŠ¥ ìµœì í™”

### 10.1 Frontend ìµœì í™”

| ê¸°ë²• | ì ìš© ìœ„ì¹˜ | íš¨ê³¼ |
|------|----------|------|
| **Context ë¶„ë¦¬** | 7ê°œ Context | ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€ |
| **í´ë§ í†µí•©** | DeviceContext, useQueueStatus | API í˜¸ì¶œ 76% ê°ì†Œ |
| **ê°€ìƒí™” ë Œë”ë§** | react-window (ìŠ¤í¬ë¦°ìƒ· ê·¸ë¦¬ë“œ) | DOM ë…¸ë“œ 85% ê°ì†Œ |
| **ì¸ë„¤ì¼** | WebP 300px | ì´ë¯¸ì§€ ìš©ëŸ‰ 90% ê°ì†Œ |
| **íƒ­ ìºì‹±** | CSS display:none | íƒ­ ì „í™˜ ì¦‰ì‹œ ë°˜ì‘ |

### 10.2 Backend ìµœì í™”

| ê¸°ë²• | ì ìš© ìœ„ì¹˜ | íš¨ê³¼ |
|------|----------|------|
| **Rate Limiting** | 5ê°€ì§€ ë¦¬ë¯¸í„° | ì„œë²„ ê³¼ë¶€í•˜ ë°©ì§€ |
| **ROI ì ìš©** | ì´ë¯¸ì§€ ë§¤ì¹­ | ê²€ìƒ‰ ì˜ì—­ ì œí•œìœ¼ë¡œ ì†ë„ í–¥ìƒ |
| **Fire-and-forget** | ì¸ë„¤ì¼ ìƒì„± | ë©”ì¸ í”Œë¡œìš° ë¸”ë¡œí‚¹ ë°©ì§€ |
| **ì„¸ì…˜ ì¬ì‚¬ìš©** | sessionManager | Appium ì„¸ì…˜ ìƒì„± ì˜¤ë²„í—¤ë“œ ì œê±° |

### 10.3 ì„±ëŠ¥ ì¸¡ì • ê²°ê³¼

| ì§€í‘œ | Before | After |
|------|--------|-------|
| ìŠ¤í¬ë¦°ìƒ· 100ì¥ ë¡œë“œ | 50MB, 5ì´ˆ | 225KB, 0.3ì´ˆ |
| DOM ë…¸ë“œ (100ì¥ ê·¸ë¦¬ë“œ) | 100ê°œ | 15ê°œ |
| API í´ë§ (5ëª… ì ‘ì†) | 150íšŒ/ë¶„ | 36íšŒ/ë¶„ |
| íƒ­ ì „í™˜ | 0.5ì´ˆ | ì¦‰ì‹œ |

---

## 11. í–¥í›„ ê°œì„  ê³„íš

### 11.1 ë‹¨ê¸° ê³„íš

| í•­ëª© | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|------|------|----------|
| iOS ì§€ì› | XCUITest ë“œë¼ì´ë²„ ì—°ë™ | ë†’ìŒ |
| ìŠ¤í¬ë¦°ìƒ· ë¹„êµ | ì´ì „ ì‹¤í–‰ê³¼ diff ì´ë¯¸ì§€ ìƒì„± | ì¤‘ê°„ |
| AI ì‹œë‚˜ë¦¬ì˜¤ ìƒì„± | ìì—°ì–´ë¡œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìƒì„± | ë‚®ìŒ |

### 11.2 ê¸°ìˆ  ë¶€ì±„

| í•­ëª© | í˜„ì¬ ìƒíƒœ | ê°œì„  ë°©ì•ˆ |
|------|----------|----------|
| React Query | Context API ì‚¬ìš© | API 10ê°œ ì´ìƒ ì‹œ ë§ˆì´ê·¸ë ˆì´ì…˜ |
| í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ | ì¼ë¶€ ì»´í¬ë„ŒíŠ¸ë§Œ | í•µì‹¬ ë¡œì§ í…ŒìŠ¤íŠ¸ ì¶”ê°€ |
| ì—ëŸ¬ í•¸ë“¤ë§ | ê¸°ë³¸ ìˆ˜ì¤€ | ì²´ê³„ì ì¸ ì—ëŸ¬ ë¶„ë¥˜ |

---

## ë¶€ë¡: ì£¼ìš” íƒ€ì… ì •ì˜

```typescript
// ì‹œë‚˜ë¦¬ì˜¤
interface Scenario {
  id: string;
  name: string;
  packageId: string;
  nodes: Node[];
  connections: Connection[];
}

// ë…¸ë“œ
interface Node {
  id: string;
  type: NodeType;
  position: { x: number; y: number };
  data: NodeData;
  label?: string;
}

// ë””ë°”ì´ìŠ¤
interface DeviceInfo {
  id: string;
  name: string;
  model: string;
  brand: string;
  androidVersion: string;
  status: 'connected' | 'offline';
  sessionActive: boolean;
}

// í…ŒìŠ¤íŠ¸ ê²°ê³¼
interface ExecutionResult {
  executionId: string;
  scenarioId: string;
  deviceId: string;
  status: 'passed' | 'failed';
  duration: number;
  steps: StepResult[];
}

// ì´ë¯¸ì§€ ë§¤ì¹­ ê²°ê³¼
interface MatchResult {
  found: boolean;
  confidence: number;
  location?: { x: number; y: number; width: number; height: number };
  centerX?: number;
  centerY?: number;
}
```

---

## ë¬¸ì˜

- **GitHub**: https://github.com/kws0109/QA_Automation
- **Wiki**: https://github.com/kws0109/QA_Automation/wiki

---

*ì‘ì„±ì¼: 2026-01-30*
