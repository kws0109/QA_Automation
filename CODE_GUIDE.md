# ê²Œì„ ìë™í™” ë„êµ¬ - ì½”ë“œ ê°€ì´ë“œ

## ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#1-í”„ë¡œì íŠ¸-ê°œìš”)
2. [ê¸°ìˆ  ìŠ¤íƒ ë° ì„ íƒ ì´ìœ ](#2-ê¸°ìˆ -ìŠ¤íƒ-ë°-ì„ íƒ-ì´ìœ )
3. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#3-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
4. [í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„](#4-í•µì‹¬-ê¸°ëŠ¥-êµ¬í˜„)
5. [ì½”ë“œ êµ¬ì¡°](#5-ì½”ë“œ-êµ¬ì¡°)
6. [ì£¼ìš” ì½”ë“œ ì„¤ëª…](#6-ì£¼ìš”-ì½”ë“œ-ì„¤ëª…)
7. [ì„¤ì¹˜ ë° ì‹¤í–‰](#7-ì„¤ì¹˜-ë°-ì‹¤í–‰)
8. [í…ŒìŠ¤íŠ¸ ë°©ë²•](#8-í…ŒìŠ¤íŠ¸-ë°©ë²•)
9. [ì„±ëŠ¥ ìµœì í™”](#9-ì„±ëŠ¥-ìµœì í™”)
10. [í–¥í›„ ê°œì„  ê³„íš](#10-í–¥í›„-ê°œì„ -ê³„íš)

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 í”„ë¡œì íŠ¸ ëª©ì 

**ë¹„ê°œë°œì(QA ë‹´ë‹¹ì)ê°€ ì½”ë“œ ì‘ì„± ì—†ì´ ëª¨ë°”ì¼ ê²Œì„ ìë™í™” í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ë„êµ¬**

ê¸°ì¡´ ìë™í™” ë„êµ¬ì˜ ë¬¸ì œì :
- Appium, Selenium ë“±ì€ ì½”ë“œ ì‘ì„± í•„ìˆ˜
- QA ë‹´ë‹¹ìê°€ ì§ì ‘ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ë§Œë“¤ê¸° ì–´ë ¤ì›€
- ê°œë°œì ë¦¬ì†ŒìŠ¤ ì˜ì¡´ë„ ë†’ìŒ

í•´ê²° ë°©ì•ˆ:
- **ë¹„ì£¼ì–¼ ë…¸ë“œ ì—ë””í„°**: ë“œë˜ê·¸ ì•¤ ë“œë¡­ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ í”Œë¡œìš° êµ¬ì„±
- **ì´ë¯¸ì§€ ê¸°ë°˜ ì¸ì‹**: ê²Œì„ UIëŠ” ì ‘ê·¼ì„± IDê°€ ì—†ì–´ ì´ë¯¸ì§€ ë§¤ì¹­ í•„ìˆ˜
- **ë‹¤ì¤‘ ë””ë°”ì´ìŠ¤ ë³‘ë ¬ ì‹¤í–‰**: QA íš¨ìœ¨ì„± ê·¹ëŒ€í™”

### 1.2 ì£¼ìš” ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì„¤ëª… | ê¸°ìˆ ì  ë‚œì´ë„ |
|------|------|--------------|
| ë¹„ì£¼ì–¼ ë…¸ë“œ ì—ë””í„° | í”Œë¡œìš°ì°¨íŠ¸ ë°©ì‹ ì‹œë‚˜ë¦¬ì˜¤ í¸ì§‘ | â˜…â˜…â˜…â˜†â˜† |
| ì´ë¯¸ì§€ í…œí”Œë¦¿ ë§¤ì¹­ | OpenCV ê¸°ë°˜ UI ìš”ì†Œ ì¸ì‹ | â˜…â˜…â˜…â˜…â˜† |
| OCR í…ìŠ¤íŠ¸ ì¸ì‹ | Google Cloud Vision ì—°ë™ | â˜…â˜…â˜…â˜†â˜† |
| ë‹¤ì¤‘ ë””ë°”ì´ìŠ¤ ë³‘ë ¬ ì‹¤í–‰ | 50ëŒ€+ ë™ì‹œ í…ŒìŠ¤íŠ¸ | â˜…â˜…â˜…â˜…â˜… |
| ì‹¤ì‹œê°„ ë””ë°”ì´ìŠ¤ ë¯¸ë¦¬ë³´ê¸° | MJPEG ìŠ¤íŠ¸ë¦¬ë° | â˜…â˜…â˜…â˜…â˜† |
| í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸ & ë¹„ë””ì˜¤ | ìŠ¤í¬ë¦°ìƒ·/ë…¹í™” ìë™í™” | â˜…â˜…â˜…â˜†â˜† |
| ìŠ¤ì¼€ì¤„ë§ | Cron ê¸°ë°˜ ì˜ˆì•½ ì‹¤í–‰ | â˜…â˜…â˜†â˜†â˜† |
| Slack ì—°ë™ | OAuth ë¡œê·¸ì¸ + ê²°ê³¼ ì•Œë¦¼ | â˜…â˜…â˜…â˜†â˜† |

### 1.3 ìš´ì˜ í™˜ê²½

ì´ ë„êµ¬ëŠ” **ì‹¤ì œ í˜„ì—…ì—ì„œ ì‚¬ìš©ë˜ëŠ” QA ìë™í™” ë„êµ¬**ì…ë‹ˆë‹¤.

| í•­ëª© | ê·œëª¨ |
|------|------|
| ë™ì‹œ ì ‘ì† ì‚¬ìš©ì | ë‹¤ì¤‘ ì‚¬ìš©ì |
| ì—°ê²° ë””ë°”ì´ìŠ¤ | 50ëŒ€ ì´ìƒ |
| ë™ì‹œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ | 50ê°œ ì´ìƒ |

---

## 2. ê¸°ìˆ  ìŠ¤íƒ ë° ì„ íƒ ì´ìœ 

### 2.1 Frontend

| ê¸°ìˆ  | ë²„ì „ | ì„ íƒ ì´ìœ  |
|------|------|----------|
| **React** | 19.x | ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ UI, ëŒ€ê·œëª¨ ì»¤ë®¤ë‹ˆí‹° |
| **TypeScript** | 5.x | íƒ€ì… ì•ˆì •ì„±, ëŸ°íƒ€ì„ ì—ëŸ¬ ë°©ì§€ |
| **Vite** | 7.x | ë¹ ë¥¸ HMR, ESM ê¸°ë°˜ ë¹Œë“œ |
| **Socket.IO Client** | 4.x | ì‹¤ì‹œê°„ ì–‘ë°©í–¥ í†µì‹  |
| **react-window** | 1.x | ëŒ€ëŸ‰ ë°ì´í„° ê°€ìƒí™” ë Œë”ë§ |
| **Recharts** | 3.x | ëŒ€ì‹œë³´ë“œ ì°¨íŠ¸ |

**Context API vs Redux/Zustand ì„ íƒ ì´ìœ :**
- ì „ì—­ ìƒíƒœê°€ 7ê°œ Contextë¡œ ëª…í™•íˆ ë¶„ë¦¬ë¨
- Reduxì˜ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì˜¤ë²„í—¤ë“œ ë¶ˆí•„ìš”
- Context + useReducerë¡œ ì¶©ë¶„í•œ ë³µì¡ë„

### 2.2 Backend

| ê¸°ìˆ  | ë²„ì „ | ì„ íƒ ì´ìœ  |
|------|------|----------|
| **Node.js** | 22.x | ë¹„ë™ê¸° I/O, Appiumê³¼ ë™ì¼ ìƒíƒœê³„ |
| **Express** | 4.x | ê²½ëŸ‰ ì›¹ í”„ë ˆì„ì›Œí¬, ë¯¸ë“¤ì›¨ì–´ ìƒíƒœê³„ |
| **TypeScript** | 5.x | íƒ€ì… ì•ˆì •ì„± |
| **Socket.IO** | 4.x | ì‹¤ì‹œê°„ í…ŒìŠ¤íŠ¸ ì§„í–‰ë¥  ë¸Œë¡œë“œìºìŠ¤íŠ¸ |
| **WebdriverIO** | 9.x | Appium í´ë¼ì´ì–¸íŠ¸, íƒ€ì… ì§€ì› |
| **Sharp** | 0.33.x | ê³ ì„±ëŠ¥ ì´ë¯¸ì§€ ì²˜ë¦¬ (libvips) |
| **node-cron** | 3.x | ìŠ¤ì¼€ì¤„ë§ |
| **Zod** | 3.x | ëŸ°íƒ€ì„ ìŠ¤í‚¤ë§ˆ ê²€ì¦ |

**WebdriverIO vs Appium JS Client ì„ íƒ ì´ìœ :**
- WebdriverIOê°€ ë” ë‚˜ì€ TypeScript ì§€ì›
- ì¬ì‹œë„, ëŒ€ê¸° ë“± ìœ í‹¸ë¦¬í‹° ë‚´ì¥
- í™œë°œí•œ ìœ ì§€ë³´ìˆ˜

### 2.3 ìë™í™” & ì´ë¯¸ì§€ ì²˜ë¦¬

| ê¸°ìˆ  | ìš©ë„ | ì„ íƒ ì´ìœ  |
|------|------|----------|
| **Appium** | ëª¨ë°”ì¼ ìë™í™” | ì—…ê³„ í‘œì¤€, Android/iOS ì§€ì› |
| **UiAutomator2** | Android ë“œë¼ì´ë²„ | ì•ˆì •ì„±, ì„±ëŠ¥ |
| **OpenCV** | ì´ë¯¸ì§€ í…œí”Œë¦¿ ë§¤ì¹­ | ì •í™•ë„, ì„±ëŠ¥ |
| **Tesseract.js** | OCR (ë¡œì»¬) | ì˜¤í”„ë¼ì¸ ì§€ì› |
| **Google Cloud Vision** | OCR (í´ë¼ìš°ë“œ) | ë†’ì€ ì •í™•ë„ |
| **FFmpeg** | ë¹„ë””ì˜¤ ì²˜ë¦¬ | ì—…ê³„ í‘œì¤€ |

### 2.4 ì¸í”„ë¼

| ê¸°ìˆ  | ìš©ë„ |
|------|------|
| **Electron** | Server Manager ë°ìŠ¤í¬í†± ì•± |
| **Cloudflare Tunnel** | ì™¸ë¶€ ì ‘ê·¼ (NAT ìš°íšŒ) |
| **Cloudflare R2** | ë¦¬í¬íŠ¸ íŒŒì¼ ì €ì¥/ê³µìœ  |

---

## 3. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 3.1 ì „ì²´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ì‚¬ìš©ì (QA ë‹´ë‹¹ì)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                       â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   Frontend    â”‚       â”‚ Server Managerâ”‚
            â”‚   (React)     â”‚       â”‚  (Electron)   â”‚
            â”‚  Port: 5173   â”‚       â”‚               â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
          HTTP/WebSocket
                    â”‚
                    â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   Backend     â”‚
            â”‚  (Express)    â”‚
            â”‚  Port: 3001   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚    Appium     â”‚
            â”‚    Server     â”‚
            â”‚  Port: 4900   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼           â–¼           â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚Device 1 â”‚ â”‚Device 2 â”‚ â”‚Device N â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 í…ŒìŠ¤íŠ¸ ì‹¤í–‰ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚â”€â”€â”€â”€â–¶â”‚  testOrchestrator â”‚â”€â”€â”€â”€â–¶â”‚  testQueueServiceâ”‚
â”‚          â”‚     â”‚   (ìš”ì²­ ìˆ˜ì‹ )      â”‚     â”‚    (ëŒ€ê¸°ì—´)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚                         â”‚
                          â”‚ ë””ìŠ¤íŒ¨ì¹˜                â”‚ ë””ë°”ì´ìŠ¤ ê°€ìš© í™•ì¸
                          â–¼                         â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚   testExecutor    â”‚â—€â”€â”€â”€â”€â”‚  deviceManager  â”‚
                 â”‚   (ì‹¤í–‰ ì—”ì§„)      â”‚     â”‚ (ë””ë°”ì´ìŠ¤ ìƒíƒœ) â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼               â–¼               â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Actions   â”‚ â”‚ imageMatch  â”‚ â”‚ textMatcher â”‚
   â”‚(tap,swipe..)â”‚ â”‚ (ì´ë¯¸ì§€ë§¤ì¹­)â”‚ â”‚   (OCR)     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚sessionManagerâ”‚â”€â”€â”€â–¶â”‚   Appium    â”‚â”€â”€â”€â–¶â”‚   Device    â”‚
   â”‚(Appium ì„¸ì…˜) â”‚     â”‚   Server    â”‚     â”‚             â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 ë°ì´í„° íë¦„

1. **ì‹œë‚˜ë¦¬ì˜¤ ì €ì¥**: JSON íŒŒì¼ (`scenarios/{id}.json`)
2. **ì‹¤í–‰ ìš”ì²­**: REST API â†’ WebSocketìœ¼ë¡œ ì§„í–‰ë¥  ë¸Œë¡œë“œìºìŠ¤íŠ¸
3. **ë¦¬í¬íŠ¸ ì €ì¥**: JSON + ìŠ¤í¬ë¦°ìƒ· PNG + ë¹„ë””ì˜¤ MP4
4. **ì‹¤ì‹œê°„ í†µì‹ **: Socket.IO ì´ë²¤íŠ¸ (`test:progress`, `test:step`, `test:complete`)

---

## 4. í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„

### 4.1 ë¹„ì£¼ì–¼ ë…¸ë“œ ì—ë””í„°

**êµ¬í˜„ ìœ„ì¹˜**: `frontend/src/components/Canvas/`

ê²Œì„ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ í”Œë¡œìš°ì°¨íŠ¸ í˜•íƒœë¡œ í¸ì§‘í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Sidebar]  â”‚           [Canvas]            â”‚    [Panel]    â”‚
â”‚            â”‚                               â”‚               â”‚
â”‚  â—‹ tap     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”      â”‚  ì„ íƒ ë…¸ë“œ    â”‚
â”‚  â—‹ swipe   â”‚  â”‚ Start â”‚â”€â”€â”€â–¶â”‚  Tap  â”‚â”€â”€â”   â”‚  ì†ì„± í¸ì§‘    â”‚
â”‚  â—‹ wait    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚               â”‚
â”‚  â—‹ image   â”‚                          â”‚   â”‚  x: [  540 ]  â”‚
â”‚  â—‹ text    â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  y: [  960 ]  â”‚
â”‚  â—‹ conditionâ”‚      â–¼                      â”‚               â”‚
â”‚  ...       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”      â”‚               â”‚
â”‚            â”‚  â”‚ Wait  â”‚â”€â”€â”€â–¶â”‚ Swipe â”‚      â”‚               â”‚
â”‚            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë…¸ë“œ íƒ€ì…**:
| íƒ€ì… | ì„¤ëª… | ì•„ì´ì½˜ |
|------|------|--------|
| `start` | ì‹œì‘ì  | â–¶ |
| `tap` | í™”ë©´ íƒ­ | ğŸ‘† |
| `longPress` | ê¸¸ê²Œ ëˆ„ë¥´ê¸° | ğŸ‘‡ |
| `swipe` | ìŠ¤ì™€ì´í”„ | â†” |
| `wait` | ëŒ€ê¸° | â± |
| `tapImage` | ì´ë¯¸ì§€ íƒ­ | ğŸ–¼ |
| `tapOcrText` | í…ìŠ¤íŠ¸ íƒ­ | ğŸ“ |
| `condition` | ì¡°ê±´ ë¶„ê¸° | â“ |

**í•µì‹¬ ìƒíƒœ ê´€ë¦¬**:
```typescript
// FlowEditorContext.tsx
interface FlowEditorState {
  nodes: Node[];           // ë…¸ë“œ ëª©ë¡
  connections: Connection[]; // ì—°ê²° ëª©ë¡
  selectedNodeId: string | null;

  // ì•¡ì…˜
  addNode: (type: NodeType, position: Position) => void;
  updateNode: (id: string, data: Partial<Node>) => void;
  deleteNode: (id: string) => void;
  addConnection: (source: string, target: string) => void;
}
```

### 4.2 ì´ë¯¸ì§€ í…œí”Œë¦¿ ë§¤ì¹­

**êµ¬í˜„ ìœ„ì¹˜**: `backend/src/services/imageMatch.ts`

ê²Œì„ UIëŠ” ì ‘ê·¼ì„± IDê°€ ì—†ì–´ **ì´ë¯¸ì§€ ê¸°ë°˜ ì¸ì‹**ì´ í•„ìˆ˜ì…ë‹ˆë‹¤.

**ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜**:
1. í˜„ì¬ í™”ë©´ ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜
2. í…œí”Œë¦¿ ì´ë¯¸ì§€ì™€ ë¹„êµ (OpenCV Template Matching)
3. ìœ ì‚¬ë„ ì„ê³„ê°’(threshold) ì´ìƒì´ë©´ ë§¤ì¹­ ì„±ê³µ
4. ë§¤ì¹­ëœ ì¢Œí‘œ ë°˜í™˜

```typescript
// imageMatch.ts í•µì‹¬ ë¡œì§
async function matchTemplate(
  screenshot: Buffer,
  template: Buffer,
  options: MatchOptions
): Promise<MatchResult> {
  // 1. ì´ë¯¸ì§€ë¥¼ OpenCV Matìœ¼ë¡œ ë³€í™˜
  const screenMat = cv.imdecode(screenshot);
  const templateMat = cv.imdecode(template);

  // 2. í…œí”Œë¦¿ ë§¤ì¹­ ì‹¤í–‰
  const result = screenMat.matchTemplate(
    templateMat,
    cv.TM_CCOEFF_NORMED  // ì •ê·œí™”ëœ ìƒê´€ê³„ìˆ˜
  );

  // 3. ìµœëŒ€ê°’(ìœ ì‚¬ë„) ë° ìœ„ì¹˜ ì°¾ê¸°
  const minMax = result.minMaxLoc();
  const confidence = minMax.maxVal;
  const location = minMax.maxLoc;

  // 4. ì„ê³„ê°’ ë¹„êµ
  if (confidence >= options.threshold) {
    return {
      found: true,
      confidence,
      centerX: location.x + templateMat.cols / 2,
      centerY: location.y + templateMat.rows / 2
    };
  }

  return { found: false, confidence };
}
```

**ROI (Region of Interest) ì§€ì›**:
```typescript
// ì „ì²´ í™”ë©´ì´ ì•„ë‹Œ íŠ¹ì • ì˜ì—­ë§Œ ê²€ìƒ‰ (ì„±ëŠ¥ ìµœì í™”)
if (options.roi) {
  const { x, y, width, height } = options.roi;
  screenMat = screenMat.getRegion(new cv.Rect(x, y, width, height));
}
```

### 4.3 ë‹¤ì¤‘ ë””ë°”ì´ìŠ¤ ë³‘ë ¬ ì‹¤í–‰

**êµ¬í˜„ ìœ„ì¹˜**: `backend/src/services/sessionManager.ts`, `testOrchestrator.ts`

**ì„¸ì…˜ ê´€ë¦¬ ì•„í‚¤í…ì²˜**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     sessionManager                           â”‚
â”‚                                                              â”‚
â”‚  sessions: Map<deviceId, ManagedSession>                    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Device A    â”‚  â”‚ Device B    â”‚  â”‚ Device C    â”‚         â”‚
â”‚  â”‚ Port: 4723  â”‚  â”‚ Port: 4724  â”‚  â”‚ Port: 4725  â”‚         â”‚
â”‚  â”‚ MJPEG: 9100 â”‚  â”‚ MJPEG: 9101 â”‚  â”‚ MJPEG: 9102 â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë³‘ë ¬ ì‹¤í–‰ êµ¬í˜„**:
```typescript
// testOrchestrator.ts
async executeParallel(
  scenarioId: string,
  deviceIds: string[]
): Promise<ParallelResult> {
  // ê° ë””ë°”ì´ìŠ¤ë³„ ë…ë¦½ ì‹¤í–‰ (Promise.allSettled)
  const results = await Promise.allSettled(
    deviceIds.map(deviceId =>
      this.executeOnDevice(scenarioId, deviceId)
    )
  );

  // í•œ ë””ë°”ì´ìŠ¤ ì‹¤íŒ¨í•´ë„ ë‹¤ë¥¸ ë””ë°”ì´ìŠ¤ëŠ” ê³„ì† ì‹¤í–‰
  return {
    results: results.map((r, i) => ({
      deviceId: deviceIds[i],
      success: r.status === 'fulfilled',
      error: r.status === 'rejected' ? r.reason : undefined
    }))
  };
}
```

**ë””ë°”ì´ìŠ¤ í ì‹œìŠ¤í…œ**:
```typescript
// ë””ë°”ì´ìŠ¤ê°€ ì‚¬ìš© ì¤‘ì´ë©´ ëŒ€ê¸°ì—´ì— ì¶”ê°€
interface DeviceQueue {
  deviceId: string;
  queue: ExecutionRequest[];
  currentExecution: string | null;
}

// ì‹¤í–‰ ì™„ë£Œ ì‹œ ë‹¤ìŒ ëŒ€ê¸° í•­ëª© ìë™ ì‹¤í–‰
onExecutionComplete(deviceId: string) {
  const nextRequest = this.queues[deviceId].shift();
  if (nextRequest) {
    this.dispatch(nextRequest);
  }
}
```

### 4.4 ì‹¤ì‹œê°„ ë””ë°”ì´ìŠ¤ ë¯¸ë¦¬ë³´ê¸°

**êµ¬í˜„ ìœ„ì¹˜**: `backend/src/services/screenStreamService.ts`

**MJPEG ìŠ¤íŠ¸ë¦¬ë° êµ¬í˜„**:
```typescript
// ë””ë°”ì´ìŠ¤ í™”ë©´ì„ MJPEG ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì „ì†¡
class ScreenStreamService {
  async startStream(deviceId: string, res: Response) {
    // HTTP multipart í—¤ë” ì„¤ì •
    res.writeHead(200, {
      'Content-Type': 'multipart/x-mixed-replace; boundary=frame',
      'Cache-Control': 'no-cache',
      'Connection': 'keep-alive'
    });

    // ì£¼ê¸°ì ìœ¼ë¡œ ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜ ë° ì „ì†¡
    const interval = setInterval(async () => {
      const screenshot = await this.captureScreen(deviceId);

      res.write('--frame\r\n');
      res.write('Content-Type: image/jpeg\r\n\r\n');
      res.write(screenshot);
      res.write('\r\n');
    }, 100); // 10fps

    res.on('close', () => clearInterval(interval));
  }
}
```

**í”„ë¡ íŠ¸ì—”ë“œ ë Œë”ë§**:
```tsx
// DevicePreview.tsx
<img
  src={`/api/sessions/${deviceId}/stream`}
  alt="Device Screen"
  onClick={handleScreenClick}  // í´ë¦­ ì‹œ ì¢Œí‘œ ìº¡ì²˜
/>
```

### 4.5 í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸ & ë¹„ë””ì˜¤ ë…¹í™”

**êµ¬í˜„ ìœ„ì¹˜**: `backend/src/services/testReportService.ts`, `screenshotEventService.ts`

**ë¦¬í¬íŠ¸ êµ¬ì¡°**:
```typescript
interface TestReport {
  id: string;
  scenarioId: string;
  scenarioName: string;
  status: 'passed' | 'failed';
  duration: number;
  devices: DeviceReport[];
}

interface DeviceReport {
  deviceId: string;
  steps: StepResult[];
  screenshots: ScreenshotInfo[];
  video?: VideoInfo;
}

interface StepResult {
  nodeId: string;
  nodeType: string;
  status: 'passed' | 'failed' | 'waiting';
  duration: number;
  timestamp: string;
  error?: string;
}
```

**ë¹„ë””ì˜¤ ë…¹í™”**:
```typescript
// Appiumì˜ startRecordingScreen í™œìš©
async startRecording(deviceId: string) {
  const driver = sessionManager.getDriver(deviceId);
  await driver.startRecordingScreen({
    videoType: 'mp4',
    videoQuality: 'medium',
    timeLimit: 1800  // 30ë¶„ ì œí•œ
  });
}

async stopRecording(deviceId: string): Promise<string> {
  const driver = sessionManager.getDriver(deviceId);
  const base64Video = await driver.stopRecordingScreen();

  // Base64 â†’ íŒŒì¼ ì €ì¥
  const videoPath = `reports/videos/${reportId}/${deviceId}.mp4`;
  await fs.writeFile(videoPath, Buffer.from(base64Video, 'base64'));

  return videoPath;
}
```

---

## 5. ì½”ë“œ êµ¬ì¡°

### 5.1 ì „ì²´ ë””ë ‰í† ë¦¬

```
game-automation-tool/
â”œâ”€â”€ backend/                    # Express API ì„œë²„
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ index.ts           # ì•± ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ appium/            # Appium ê´€ë ¨
â”‚   â”‚   â”‚   â”œâ”€â”€ driver.ts      # ë“œë¼ì´ë²„ ì„¤ì •
â”‚   â”‚   â”‚   â””â”€â”€ actions/       # ë””ë°”ì´ìŠ¤ ì•¡ì…˜
â”‚   â”‚   â”‚       â”œâ”€â”€ tap.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ swipe.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ text.ts
â”‚   â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ services/          # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”‚   â”œâ”€â”€ testExecutor.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ testOrchestrator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ sessionManager.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ deviceManager.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ imageMatch.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ textMatcher/
â”‚   â”‚   â”‚   â””â”€â”€ execution/     # ì‹¤í–‰ ê´€ë ¨ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ routes/            # API ë¼ìš°íŠ¸
â”‚   â”‚   â”œâ”€â”€ middleware/        # ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚   â”œâ”€â”€ schemas/           # Zod ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â””â”€â”€ types/             # íƒ€ì… ì •ì˜
â”‚   â”œâ”€â”€ scenarios/             # ì‹œë‚˜ë¦¬ì˜¤ JSON
â”‚   â”œâ”€â”€ templates/             # ì´ë¯¸ì§€ í…œí”Œë¦¿
â”‚   â””â”€â”€ reports/               # í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸
â”‚
â”œâ”€â”€ frontend/                   # React ì›¹ í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.tsx           # ì•± ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ App.tsx            # ë©”ì¸ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ components/        # UI ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ Canvas/        # ë…¸ë“œ ì—ë””í„°
â”‚   â”‚   â”‚   â”œâ”€â”€ Panel/         # ì†ì„± íŒ¨ë„
â”‚   â”‚   â”‚   â”œâ”€â”€ DevicePreview/ # ë””ë°”ì´ìŠ¤ ë¯¸ë¦¬ë³´ê¸°
â”‚   â”‚   â”‚   â”œâ”€â”€ ExecutionCenter/
â”‚   â”‚   â”‚   â”œâ”€â”€ TestReports/
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ contexts/          # React Context
â”‚   â”‚   â”œâ”€â”€ hooks/             # ì»¤ìŠ¤í…€ í›…
â”‚   â”‚   â””â”€â”€ types/             # íƒ€ì… ì •ì˜
â”‚   â””â”€â”€ vite.config.ts
â”‚
â”œâ”€â”€ server-manager/             # Electron ì„œë²„ ê´€ë¦¬ ì•±
â”‚   â”œâ”€â”€ electron/              # ë©”ì¸ í”„ë¡œì„¸ìŠ¤
â”‚   â””â”€â”€ src/                   # React UI
â”‚
â”œâ”€â”€ shared/                     # ê³µìœ  íƒ€ì…
â”‚   â””â”€â”€ types/
â”‚
â””â”€â”€ docs/                       # Wiki ë¬¸ì„œ
```

### 5.2 Backend í•µì‹¬ ëª¨ë“ˆ

| ëª¨ë“ˆ | íŒŒì¼ | ì—­í•  |
|------|------|------|
| **testOrchestrator** | `services/testOrchestrator.ts` | í…ŒìŠ¤íŠ¸ ìš”ì²­ ìˆ˜ì‹ , í ê´€ë¦¬, ë””ìŠ¤íŒ¨ì¹˜ |
| **testExecutor** | `services/testExecutor.ts` | ì‹œë‚˜ë¦¬ì˜¤ ë…¸ë“œ ìˆœíšŒ ë° ì‹¤í–‰ |
| **sessionManager** | `services/sessionManager.ts` | Appium ì„¸ì…˜ ìƒëª…ì£¼ê¸° ê´€ë¦¬ |
| **deviceManager** | `services/deviceManager.ts` | ADB ë””ë°”ì´ìŠ¤ íƒìƒ‰, ìƒíƒœ ëª¨ë‹ˆí„°ë§ |
| **imageMatch** | `services/imageMatch.ts` | OpenCV í…œí”Œë¦¿ ë§¤ì¹­ |
| **textMatcher** | `services/textMatcher/` | OCR í…ìŠ¤íŠ¸ ì¸ì‹ |
| **Actions** | `appium/actions/` | ë””ë°”ì´ìŠ¤ ì•¡ì…˜ (tap, swipe ë“±) |

### 5.3 Frontend Context êµ¬ì¡°

```
App.tsx
â”œâ”€â”€ AuthContext           # ì¸ì¦ ìƒíƒœ
â”‚   â””â”€â”€ user, isAuthenticated, login(), logout()
â”‚
â”œâ”€â”€ DeviceContext         # ë””ë°”ì´ìŠ¤ ìƒíƒœ (10ì´ˆ í´ë§)
â”‚   â””â”€â”€ devices, sessions, startSession(), stopSession()
â”‚
â”œâ”€â”€ ExecutionContext      # ì‹¤í–‰ ìƒíƒœ (3ì´ˆ í´ë§)
â”‚   â””â”€â”€ queueStatus, executeTest(), stopExecution()
â”‚
â”œâ”€â”€ UIContext             # UI ìƒíƒœ
â”‚   â””â”€â”€ activeTab, modals
â”‚
â”œâ”€â”€ FlowEditorContext     # ë…¸ë“œ í¸ì§‘
â”‚   â””â”€â”€ nodes, connections, selectedNode, addNode()
â”‚
â”œâ”€â”€ ScenarioEditorContext # ì‹œë‚˜ë¦¬ì˜¤ ê´€ë¦¬
â”‚   â””â”€â”€ scenarios, packages, templates, save(), load()
â”‚
â””â”€â”€ EditorPreviewContext  # í”„ë¦¬ë·° ìƒíƒœ
    â””â”€â”€ previewDevice, highlight
```

---

## 6. ì£¼ìš” ì½”ë“œ ì„¤ëª…

### 6.1 ë…¸ë“œ ì‹¤í–‰ ì—”ì§„ (testExecutor.ts)

ì‹œë‚˜ë¦¬ì˜¤ì˜ ë…¸ë“œë¥¼ ìˆœíšŒí•˜ë©° ì‹¤í–‰í•˜ëŠ” í•µì‹¬ ë¡œì§ì…ë‹ˆë‹¤.

```typescript
// backend/src/services/testExecutor.ts

class TestExecutor {
  /**
   * ì‹œë‚˜ë¦¬ì˜¤ ì‹¤í–‰ ë©”ì¸ í•¨ìˆ˜
   */
  async execute(
    scenarioId: string,
    deviceId: string,
    options: ExecutionOptions
  ): Promise<ExecutionResult> {
    const scenario = await this.loadScenario(scenarioId);
    const session = sessionManager.getSession(deviceId);

    // ë¹„ë””ì˜¤ ë…¹í™” ì‹œì‘
    if (options.recordVideo) {
      await this.startRecording(deviceId);
    }

    // Start ë…¸ë“œ ì°¾ê¸°
    const startNode = scenario.nodes.find(n => n.type === 'start');
    let currentNode = this.getNextNode(scenario, startNode.id);

    const results: StepResult[] = [];

    // ë…¸ë“œ ìˆœíšŒ ì‹¤í–‰
    while (currentNode) {
      const stepResult = await this.executeNode(
        currentNode,
        deviceId,
        scenario
      );

      results.push(stepResult);

      // ì‹¤ì‹œê°„ ì§„í–‰ë¥  ë¸Œë¡œë“œìºìŠ¤íŠ¸
      this.io.emit('test:step', {
        executionId: this.executionId,
        deviceId,
        step: stepResult
      });

      // ì‹¤íŒ¨ ì‹œ ì¤‘ë‹¨
      if (stepResult.status === 'failed') {
        break;
      }

      // ë‹¤ìŒ ë…¸ë“œë¡œ ì´ë™ (ì¡°ê±´ ë¶„ê¸° ì²˜ë¦¬)
      currentNode = this.getNextNode(
        scenario,
        currentNode.id,
        stepResult.branchResult  // 'yes' | 'no' for condition nodes
      );
    }

    // ë¹„ë””ì˜¤ ë…¹í™” ì¤‘ì§€ ë° ì €ì¥
    if (options.recordVideo) {
      await this.stopRecording(deviceId);
    }

    return {
      scenarioId,
      deviceId,
      status: results.every(r => r.status === 'passed') ? 'passed' : 'failed',
      steps: results
    };
  }

  /**
   * ë‹¨ì¼ ë…¸ë“œ ì‹¤í–‰
   */
  private async executeNode(
    node: Node,
    deviceId: string,
    scenario: Scenario
  ): Promise<StepResult> {
    const startTime = Date.now();

    try {
      const actions = sessionManager.getActions(deviceId);

      switch (node.type) {
        case 'tap':
          await actions.tap(node.data.x, node.data.y);
          break;

        case 'swipe':
          await actions.swipe(
            node.data.startX, node.data.startY,
            node.data.endX, node.data.endY,
            node.data.duration
          );
          break;

        case 'tapImage':
          const matchResult = await imageMatch.findAndTap(
            deviceId,
            node.data.templateId,
            { threshold: node.data.threshold }
          );
          if (!matchResult.found) {
            throw new Error('Image not found');
          }
          break;

        case 'wait':
          await this.sleep(node.data.duration);
          break;

        case 'waitUntilImage':
          await this.waitForCondition(
            () => imageMatch.exists(deviceId, node.data.templateId),
            node.data.timeout
          );
          break;

        case 'condition':
          return await this.executeCondition(node, deviceId);

        // ... ê¸°íƒ€ ë…¸ë“œ íƒ€ì…
      }

      // ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜
      await this.captureScreenshot(deviceId, node.id);

      return {
        nodeId: node.id,
        status: 'passed',
        duration: Date.now() - startTime
      };

    } catch (error) {
      // ì—ëŸ¬ ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜
      await this.captureScreenshot(deviceId, node.id, 'error');

      return {
        nodeId: node.id,
        status: 'failed',
        duration: Date.now() - startTime,
        error: error.message
      };
    }
  }

  /**
   * ì¡°ê±´ ë…¸ë“œ ì‹¤í–‰ (ë¶„ê¸° ì²˜ë¦¬)
   */
  private async executeCondition(
    node: Node,
    deviceId: string
  ): Promise<StepResult> {
    let conditionMet = false;

    switch (node.data.conditionType) {
      case 'imageExists':
        const result = await imageMatch.match(
          deviceId,
          node.data.templateId
        );
        conditionMet = result.found;
        break;

      case 'textExists':
        const ocrResult = await textMatcher.find(
          deviceId,
          node.data.text
        );
        conditionMet = ocrResult.found;
        break;
    }

    return {
      nodeId: node.id,
      status: 'passed',
      branchResult: conditionMet ? 'yes' : 'no'
    };
  }
}
```

### 6.2 ì´ë¯¸ì§€ ë§¤ì¹­ ì„œë¹„ìŠ¤ (imageMatch.ts)

```typescript
// backend/src/services/imageMatch.ts

class ImageMatchService {
  /**
   * í…œí”Œë¦¿ ì´ë¯¸ì§€ ë§¤ì¹­
   */
  async match(
    screenshot: Buffer,
    templateId: string,
    options: MatchOptions = {}
  ): Promise<MatchResult> {
    const { threshold = 0.8, roi } = options;

    // í…œí”Œë¦¿ ì´ë¯¸ì§€ ë¡œë“œ
    const templatePath = this.getTemplatePath(templateId);
    const templateBuffer = await fs.readFile(templatePath);

    // Sharpë¡œ ì´ë¯¸ì§€ ì „ì²˜ë¦¬
    let processedScreenshot = sharp(screenshot);
    let processedTemplate = sharp(templateBuffer);

    // ROI ì ìš© (ê²€ìƒ‰ ì˜ì—­ ì œí•œ)
    if (roi) {
      processedScreenshot = processedScreenshot.extract({
        left: roi.x,
        top: roi.y,
        width: roi.width,
        height: roi.height
      });
    }

    // Grayscale ë³€í™˜ (ë§¤ì¹­ ì •í™•ë„ í–¥ìƒ)
    const screenGray = await processedScreenshot.grayscale().raw().toBuffer();
    const templateGray = await processedTemplate.grayscale().raw().toBuffer();

    // OpenCV í…œí”Œë¦¿ ë§¤ì¹­
    const screenMat = new cv.Mat(screenGray, screenHeight, screenWidth, cv.CV_8UC1);
    const templateMat = new cv.Mat(templateGray, templateHeight, templateWidth, cv.CV_8UC1);

    const result = new cv.Mat();
    cv.matchTemplate(screenMat, templateMat, result, cv.TM_CCOEFF_NORMED);

    // ìµœëŒ€ ìœ ì‚¬ë„ ìœ„ì¹˜ ì°¾ê¸°
    const minMax = cv.minMaxLoc(result);
    const confidence = minMax.maxVal;

    if (confidence >= threshold) {
      // ì¤‘ì‹¬ ì¢Œí‘œ ê³„ì‚°
      const centerX = minMax.maxLoc.x + templateWidth / 2;
      const centerY = minMax.maxLoc.y + templateHeight / 2;

      // ROI ì˜¤í”„ì…‹ ì ìš©
      const absoluteX = roi ? centerX + roi.x : centerX;
      const absoluteY = roi ? centerY + roi.y : centerY;

      return {
        found: true,
        confidence,
        location: {
          x: minMax.maxLoc.x + (roi?.x || 0),
          y: minMax.maxLoc.y + (roi?.y || 0),
          width: templateWidth,
          height: templateHeight
        },
        centerX: absoluteX,
        centerY: absoluteY
      };
    }

    return { found: false, confidence };
  }

  /**
   * í•˜ì´ë¼ì´íŠ¸ ìŠ¤í¬ë¦°ìƒ· ìƒì„±
   */
  async createHighlightedScreenshot(
    screenshot: Buffer,
    matchResult: MatchResult,
    options: HighlightOptions = {}
  ): Promise<Buffer> {
    const { color = '#00FF00', strokeWidth = 4 } = options;

    if (!matchResult.found) {
      return screenshot;
    }

    const { x, y, width, height } = matchResult.location;

    // SVG ì˜¤ë²„ë ˆì´ ìƒì„±
    const overlay = Buffer.from(`
      <svg width="${width + strokeWidth * 2}" height="${height + strokeWidth * 2}">
        <rect
          x="${strokeWidth / 2}"
          y="${strokeWidth / 2}"
          width="${width}"
          height="${height}"
          fill="none"
          stroke="${color}"
          stroke-width="${strokeWidth}"
        />
      </svg>
    `);

    // ìŠ¤í¬ë¦°ìƒ·ì— ì˜¤ë²„ë ˆì´ í•©ì„±
    return sharp(screenshot)
      .composite([{
        input: overlay,
        left: x - strokeWidth / 2,
        top: y - strokeWidth / 2
      }])
      .png()
      .toBuffer();
  }
}
```

### 6.3 ì„¸ì…˜ ê´€ë¦¬ (sessionManager.ts)

```typescript
// backend/src/services/sessionManager.ts

interface ManagedSession {
  deviceId: string;
  driver: Browser;           // WebdriverIO Browser ì¸ìŠ¤í„´ìŠ¤
  actions: Actions;          // ë””ë°”ì´ìŠ¤ ì•¡ì…˜ ì¸ìŠ¤í„´ìŠ¤
  appiumPort: number;
  mjpegPort: number;
  status: 'active' | 'idle' | 'error';
  createdAt: Date;
}

class SessionManager {
  private sessions: Map<string, ManagedSession> = new Map();
  private nextAppiumPort = 4723;
  private nextMjpegPort = 9100;

  /**
   * Appium ì„¸ì…˜ ìƒì„±
   */
  async createSession(deviceId: string): Promise<ManagedSession> {
    // ì´ë¯¸ ì„¸ì…˜ì´ ìˆìœ¼ë©´ ë°˜í™˜
    if (this.sessions.has(deviceId)) {
      return this.sessions.get(deviceId)!;
    }

    const appiumPort = this.nextAppiumPort++;
    const mjpegPort = this.nextMjpegPort++;

    // WebdriverIO Capabilities ì„¤ì •
    const capabilities = {
      platformName: 'Android',
      'appium:deviceName': deviceId,
      'appium:udid': deviceId,
      'appium:automationName': 'UiAutomator2',
      'appium:noReset': true,
      'appium:mjpegServerPort': mjpegPort,
      'appium:newCommandTimeout': 300
    };

    // WebdriverIO ë“œë¼ì´ë²„ ìƒì„±
    const driver = await remote({
      hostname: 'localhost',
      port: 4900,  // Appium ì„œë²„ í¬íŠ¸
      path: '/',
      capabilities
    });

    // Actions ì¸ìŠ¤í„´ìŠ¤ ìƒì„± (ë“œë¼ì´ë²„ ì£¼ì…)
    const actions = new Actions(
      () => driver,  // DriverProvider
      deviceId
    );

    const session: ManagedSession = {
      deviceId,
      driver,
      actions,
      appiumPort,
      mjpegPort,
      status: 'active',
      createdAt: new Date()
    };

    this.sessions.set(deviceId, session);

    console.log(`[SessionManager] Session created for ${deviceId}`);

    return session;
  }

  /**
   * ì„¸ì…˜ ì¢…ë£Œ
   */
  async destroySession(deviceId: string): Promise<void> {
    const session = this.sessions.get(deviceId);
    if (!session) return;

    try {
      await session.driver.deleteSession();
    } catch (error) {
      console.warn(`[SessionManager] Error destroying session: ${error}`);
    }

    this.sessions.delete(deviceId);
    console.log(`[SessionManager] Session destroyed for ${deviceId}`);
  }

  /**
   * Actions ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜
   */
  getActions(deviceId: string): Actions | null {
    return this.sessions.get(deviceId)?.actions || null;
  }

  /**
   * ë“œë¼ì´ë²„ ë°˜í™˜
   */
  getDriver(deviceId: string): Browser | null {
    return this.sessions.get(deviceId)?.driver || null;
  }
}

export const sessionManager = new SessionManager();
```

### 6.4 ë””ë°”ì´ìŠ¤ ì•¡ì…˜ (Actions í´ë˜ìŠ¤)

```typescript
// backend/src/appium/actions/index.ts

type DriverProvider = () => Browser;

export class Actions {
  constructor(
    private driverProvider: DriverProvider,
    private deviceId: string
  ) {}

  private get driver(): Browser {
    return this.driverProvider();
  }

  /**
   * í™”ë©´ íƒ­
   */
  async tap(x: number, y: number): Promise<void> {
    console.log(`[${this.deviceId}] tap(${x}, ${y})`);

    await this.driver.action('pointer')
      .move({ x, y, origin: 'viewport' })
      .down()
      .up()
      .perform();
  }

  /**
   * ê¸¸ê²Œ ëˆ„ë¥´ê¸°
   */
  async longPress(x: number, y: number, duration: number = 1000): Promise<void> {
    console.log(`[${this.deviceId}] longPress(${x}, ${y}, ${duration}ms)`);

    await this.driver.action('pointer')
      .move({ x, y, origin: 'viewport' })
      .down()
      .pause(duration)
      .up()
      .perform();
  }

  /**
   * ìŠ¤ì™€ì´í”„
   */
  async swipe(
    startX: number, startY: number,
    endX: number, endY: number,
    duration: number = 300
  ): Promise<void> {
    console.log(`[${this.deviceId}] swipe(${startX},${startY} â†’ ${endX},${endY})`);

    await this.driver.action('pointer')
      .move({ x: startX, y: startY, origin: 'viewport' })
      .down()
      .move({ x: endX, y: endY, origin: 'viewport', duration })
      .up()
      .perform();
  }

  /**
   * í…ìŠ¤íŠ¸ ì…ë ¥
   */
  async inputText(text: string, options: InputOptions = {}): Promise<void> {
    console.log(`[${this.deviceId}] inputText("${text}")`);

    // í¬ì»¤ìŠ¤ëœ ìš”ì†Œì— í…ìŠ¤íŠ¸ ì…ë ¥
    const activeElement = await this.driver.$('*:focus');

    if (options.clearFirst) {
      await activeElement.clearValue();
    }

    if (options.useAdb) {
      // ADBë¥¼ í†µí•œ ì§ì ‘ ì…ë ¥ (í‚¤ë³´ë“œ ì–¸ì–´ ë¬´ê´€)
      await this.driver.execute('mobile: shell', {
        command: 'input',
        args: ['text', text]
      });
    } else {
      await activeElement.setValue(text);
    }
  }

  /**
   * ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜
   */
  async screenshot(): Promise<Buffer> {
    const base64 = await this.driver.takeScreenshot();
    return Buffer.from(base64, 'base64');
  }

  /**
   * ì•± ì‹¤í–‰
   */
  async launchApp(packageName: string, activityName?: string): Promise<void> {
    console.log(`[${this.deviceId}] launchApp(${packageName})`);

    await this.driver.execute('mobile: activateApp', {
      appId: packageName
    });
  }

  /**
   * ì•± ì¢…ë£Œ
   */
  async terminateApp(packageName: string): Promise<void> {
    console.log(`[${this.deviceId}] terminateApp(${packageName})`);

    await this.driver.execute('mobile: terminateApp', {
      appId: packageName
    });
  }
}
```

### 6.5 ì‹¤ì‹œê°„ í†µì‹  (Socket.IO)

```typescript
// backend/src/index.ts

import { Server as SocketIOServer } from 'socket.io';

const io = new SocketIOServer(httpServer, {
  cors: { origin: '*' }
});

// í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì„œë¹„ìŠ¤ì— Socket.IO ì¸ìŠ¤í„´ìŠ¤ ì „ë‹¬
testOrchestrator.setSocketIO(io);

io.on('connection', (socket) => {
  console.log('Client connected:', socket.id);

  // ë””ë°”ì´ìŠ¤ ìƒíƒœ êµ¬ë…
  socket.on('subscribe:device', (deviceId: string) => {
    socket.join(`device:${deviceId}`);
  });

  socket.on('disconnect', () => {
    console.log('Client disconnected:', socket.id);
  });
});

// í…ŒìŠ¤íŠ¸ ì§„í–‰ë¥  ë¸Œë¡œë“œìºìŠ¤íŠ¸ ì˜ˆì‹œ
// testExecutor.tsì—ì„œ í˜¸ì¶œ
this.io.emit('test:progress', {
  executionId,
  deviceId,
  progress: (completedSteps / totalSteps) * 100,
  currentStep: completedSteps,
  totalSteps
});

this.io.emit('test:step', {
  executionId,
  deviceId,
  step: {
    nodeId: node.id,
    status: 'passed',
    duration: 1500
  }
});

this.io.emit('test:complete', {
  executionId,
  deviceId,
  status: 'passed',
  duration: totalDuration
});
```

---

## 7. ì„¤ì¹˜ ë° ì‹¤í–‰

### 7.1 ì‚¬ì „ ìš”êµ¬ì‚¬í•­

| í•­ëª© | ë²„ì „ | ì„¤ì¹˜ ëª…ë ¹ |
|------|------|----------|
| Node.js | 22.x LTS | https://nodejs.org |
| JDK | 17+ | `choco install openjdk17` |
| Android SDK | - | Android Studio ì„¤ì¹˜ |
| Appium | 2.x | `npm install -g appium` |
| UiAutomator2 | - | `appium driver install uiautomator2` |
| OpenCV | 4.x | `choco install opencv` |
| FFmpeg | - | `choco install ffmpeg` |

### 7.2 ì„¤ì¹˜

```bash
# 1. ë ˆí¬ì§€í† ë¦¬ í´ë¡ 
git clone https://github.com/kws0109/QA_Automation.git
cd QA_Automation

# 2. Backend ì˜ì¡´ì„± ì„¤ì¹˜
cd backend && npm install

# 3. Frontend ì˜ì¡´ì„± ì„¤ì¹˜
cd ../frontend && npm install

# 4. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp backend/.env.example backend/.env
# .env íŒŒì¼ í¸ì§‘
```

### 7.3 ì‹¤í–‰

```bash
# Terminal 1: Appium ì„œë²„
appium --port 4900 --allow-insecure=uiautomator2:adb_shell

# Terminal 2: Backend
cd backend && npm run dev

# Terminal 3: Frontend
cd frontend && npm run dev
```

**ì ‘ì†**: http://localhost:5173

### 7.4 Server Manager ì‚¬ìš© (ê¶Œì¥)

```bash
cd server-manager && npm install && npm run electron:dev
```

---

## 8. í…ŒìŠ¤íŠ¸ ë°©ë²•

### 8.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

```bash
# Frontend
cd frontend && npm run test

# ì»¤ë²„ë¦¬ì§€
npm run test:coverage
```

### 8.2 ë¹Œë“œ ê²€ì¦

```bash
# Backend íƒ€ì… ì²´í¬ + ë¹Œë“œ
cd backend && npm run typecheck && npm run build

# Frontend ë¦°íŠ¸ + ë¹Œë“œ
cd frontend && npm run lint && npm run build
```

### 8.3 E2E í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

1. **ë””ë°”ì´ìŠ¤ ì—°ê²° í™•ì¸**
   - ADB ì—°ê²°ëœ ë””ë°”ì´ìŠ¤ê°€ ëª©ë¡ì— í‘œì‹œë˜ëŠ”ì§€
   - ì„¸ì…˜ ì‹œì‘/ì¢…ë£Œ ë™ì‘

2. **ì‹œë‚˜ë¦¬ì˜¤ í¸ì§‘**
   - ë…¸ë“œ ì¶”ê°€, ì—°ê²°, ì‚­ì œ
   - ì†ì„± í¸ì§‘
   - ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°

3. **í…ŒìŠ¤íŠ¸ ì‹¤í–‰**
   - ë‹¨ì¼ ë””ë°”ì´ìŠ¤ ì‹¤í–‰
   - ë‹¤ì¤‘ ë””ë°”ì´ìŠ¤ ë³‘ë ¬ ì‹¤í–‰
   - ì‹¤ì‹œê°„ ì§„í–‰ë¥  í‘œì‹œ

4. **ë¦¬í¬íŠ¸ í™•ì¸**
   - ìŠ¤í¬ë¦°ìƒ· í‘œì‹œ
   - ë¹„ë””ì˜¤ ì¬ìƒ
   - HTML/PDF ë‚´ë³´ë‚´ê¸°

---

## 9. ì„±ëŠ¥ ìµœì í™”

### 9.1 Frontend ìµœì í™”

| ê¸°ë²• | ì ìš© ìœ„ì¹˜ | íš¨ê³¼ |
|------|----------|------|
| **Context ë¶„ë¦¬** | 7ê°œ Context | ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€ |
| **í´ë§ í†µí•©** | DeviceContext, useQueueStatus | API í˜¸ì¶œ 76% ê°ì†Œ |
| **ê°€ìƒí™” ë Œë”ë§** | react-window (ìŠ¤í¬ë¦°ìƒ· ê·¸ë¦¬ë“œ) | DOM ë…¸ë“œ 85% ê°ì†Œ |
| **ì¸ë„¤ì¼** | WebP 300px | ì´ë¯¸ì§€ ìš©ëŸ‰ 90% ê°ì†Œ |
| **íƒ­ ìºì‹±** | CSS display:none | íƒ­ ì „í™˜ ì¦‰ì‹œ ë°˜ì‘ |

### 9.2 Backend ìµœì í™”

| ê¸°ë²• | ì ìš© ìœ„ì¹˜ | íš¨ê³¼ |
|------|----------|------|
| **Rate Limiting** | 5ê°€ì§€ ë¦¬ë¯¸í„° | ì„œë²„ ê³¼ë¶€í•˜ ë°©ì§€ |
| **ROI ì ìš©** | ì´ë¯¸ì§€ ë§¤ì¹­ | ê²€ìƒ‰ ì˜ì—­ ì œí•œìœ¼ë¡œ ì†ë„ í–¥ìƒ |
| **Fire-and-forget** | ì¸ë„¤ì¼ ìƒì„± | ë©”ì¸ í”Œë¡œìš° ë¸”ë¡œí‚¹ ë°©ì§€ |
| **ì„¸ì…˜ ì¬ì‚¬ìš©** | sessionManager | Appium ì„¸ì…˜ ìƒì„± ì˜¤ë²„í—¤ë“œ ì œê±° |

### 9.3 ì„±ëŠ¥ ì¸¡ì • ê²°ê³¼

| ì§€í‘œ | Before | After |
|------|--------|-------|
| ìŠ¤í¬ë¦°ìƒ· 100ì¥ ë¡œë“œ | 50MB, 5ì´ˆ | 225KB, 0.3ì´ˆ |
| DOM ë…¸ë“œ (100ì¥ ê·¸ë¦¬ë“œ) | 100ê°œ | 15ê°œ |
| API í´ë§ (5ëª… ì ‘ì†) | 150íšŒ/ë¶„ | 36íšŒ/ë¶„ |
| íƒ­ ì „í™˜ | 0.5ì´ˆ | ì¦‰ì‹œ |

---

## 10. í–¥í›„ ê°œì„  ê³„íš

### 10.1 ë‹¨ê¸° ê³„íš

| í•­ëª© | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|------|------|----------|
| iOS ì§€ì› | XCUITest ë“œë¼ì´ë²„ ì—°ë™ | ë†’ìŒ |
| ìŠ¤í¬ë¦°ìƒ· ë¹„êµ | ì´ì „ ì‹¤í–‰ê³¼ diff ì´ë¯¸ì§€ ìƒì„± | ì¤‘ê°„ |
| AI ì‹œë‚˜ë¦¬ì˜¤ ìƒì„± | ìì—°ì–´ë¡œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìƒì„± | ë‚®ìŒ |

### 10.2 ê¸°ìˆ  ë¶€ì±„

| í•­ëª© | í˜„ì¬ ìƒíƒœ | ê°œì„  ë°©ì•ˆ |
|------|----------|----------|
| React Query | Context API ì‚¬ìš© | API 10ê°œ ì´ìƒ ì‹œ ë§ˆì´ê·¸ë ˆì´ì…˜ |
| í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ | ì¼ë¶€ ì»´í¬ë„ŒíŠ¸ë§Œ | í•µì‹¬ ë¡œì§ í…ŒìŠ¤íŠ¸ ì¶”ê°€ |
| ì—ëŸ¬ í•¸ë“¤ë§ | ê¸°ë³¸ ìˆ˜ì¤€ | ì²´ê³„ì ì¸ ì—ëŸ¬ ë¶„ë¥˜ |

---

## ë¶€ë¡: ì£¼ìš” íƒ€ì… ì •ì˜

```typescript
// ì‹œë‚˜ë¦¬ì˜¤
interface Scenario {
  id: string;
  name: string;
  packageId: string;
  nodes: Node[];
  connections: Connection[];
}

// ë…¸ë“œ
interface Node {
  id: string;
  type: NodeType;
  position: { x: number; y: number };
  data: NodeData;
  label?: string;
}

// ë””ë°”ì´ìŠ¤
interface DeviceInfo {
  id: string;
  name: string;
  model: string;
  brand: string;
  androidVersion: string;
  status: 'connected' | 'offline';
  sessionActive: boolean;
}

// í…ŒìŠ¤íŠ¸ ê²°ê³¼
interface ExecutionResult {
  executionId: string;
  scenarioId: string;
  deviceId: string;
  status: 'passed' | 'failed';
  duration: number;
  steps: StepResult[];
}

// ì´ë¯¸ì§€ ë§¤ì¹­ ê²°ê³¼
interface MatchResult {
  found: boolean;
  confidence: number;
  location?: { x: number; y: number; width: number; height: number };
  centerX?: number;
  centerY?: number;
}
```

---

## ë¬¸ì˜

- **GitHub**: https://github.com/kws0109/QA_Automation
- **Wiki**: https://github.com/kws0109/QA_Automation/wiki

---

*ì‘ì„±ì¼: 2026-01-30*
